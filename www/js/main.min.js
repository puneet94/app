!function(e){"use strict";var t=e.module("myApp",["ui.router","ionic","ngMessages","ngSanitize","afkl.lazyImage","satellizer","ngFileUpload","ngMap","btford.socket-io","720kb.socialshare","authModApp","app.common","ngCordova","app.home","app.store","app.chat","app.admin","ngMaterial","app.review","app.product","app.user","app.offer","app.event"]);t.config(["$urlRouterProvider","$stateProvider","$ionicConfigProvider",function(e,t,o){o.tabs.position("bottom"),e.otherwise("/tab/tabsHome")}]),t.run(["$rootScope","$location","$state","$timeout","$ionicPlatform",function(e,t,o,r,a){a.ready(function(){window.cordova&&window.cordova.plugins&&window.cordova.plugins.Keyboard&&(cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!0),cordova.plugins.Keyboard.disableScroll(!0)),window.StatusBar&&StatusBar.styleDefault()}),e.config={},e.config.app_url=t.url(),e.config.app_path=t.path(),e.layout={},e.layout.loading=!1,e.$on("$stateChangeStart",function(){r(function(){e.layout.loading=!0})}),e.$on("$stateChangeSuccess",function(){r(function(){e.layout.loading=!1},1e3)}),e.$on("$stateChangeError",function(){alert("you are not authorized to view this page"),e.layout.loading=!1})}])}(window.angular),function(e){"use strict";function t(e,t,o,r){var a=e.defer();return o.isAuthenticated()?a.resolve():(t(function(){r.changeBrowserURLMethod("/")}),a.reject()),a.promise}function o(e,t,o,r,a){var n=e.defer();return r.getStore(t.storeId,{select:"admin"}).then(function(e){o.getUser()._id==e.data.admin?n.resolve():(n.reject(),a.changeBrowserURLMethod("/home"))},function(e){console.log(e)}),n.promise}e.module("app.admin",[]).config(["$stateProvider",function(e){e.state("adminCreateStore",{url:"/admin/createStore",templateUrl:"app/admin/views/adminCreateStore.html",controller:"CreateStoreController",controllerAs:"csc",resolve:{redirectIfNotAuthenticated2:["$q","$timeout","$auth","changeBrowserURL",t]}}).state("adminStorePage",{url:"/admin/adminStorePage/:storeId",templateUrl:"app/admin/views/adminStorePage.html",controller:"AdminStoreController",controllerAs:"asc",resolve:{redirectIfNotAuthenticated2:["$q","$timeout","$auth","changeBrowserURL",t],redirectIfNotStoreAuthenticated:["$q","$stateParams","userData","adminStoreService","changeBrowserURL",o]}}).state("adminCreateOffer",{url:"/admin/adminCreateOffer/:storeId",templateUrl:"app/admin/views/adminCreateOffer.html",resolve:{redirectIfNotAuthenticated2:["$q","$timeout","$auth","changeBrowserURL",t],redirectIfNotStoreAuthenticated:["$q","$stateParams","userData","adminStoreService","changeBrowserURL",o]}}).state("adminEditOffer",{url:"/admin/adminEditOffer/:storeId/:offerId",templateUrl:"app/admin/views/adminEditOffer.html",resolve:{redirectIfNotAuthenticated2:["$q","$timeout","$auth","changeBrowserURL",t],redirectIfNotStoreAuthenticated:["$q","$stateParams","userData","adminStoreService","changeBrowserURL",o]}}).state("adminCreateEvent",{url:"/admin/adminCreateEvent/:storeId",templateUrl:"app/admin/views/adminCreateEvent.html",resolve:{redirectIfNotAuthenticated2:["$q","$timeout","$auth","changeBrowserURL",t],redirectIfNotStoreAuthenticated:["$q","$stateParams","userData","adminStoreService","changeBrowserURL",o]}}).state("adminEditEvent",{url:"/admin/adminEditEvent/:storeId/:eventId",templateUrl:"app/admin/views/adminEditEvent.html",resolve:{redirectIfNotAuthenticated2:["$q","$timeout","$auth","changeBrowserURL",t],redirectIfNotStoreAuthenticated:["$q","$stateParams","userData","adminStoreService","changeBrowserURL",o]}})}])}(window.angular),function(e){"use strict";function t(e,t,r){var a="1068203956594250";console.log("the state provider"),console.log(window.location.origin);var n="http://www.ofline.in/authenticate";e.state("signup",{url:"/signup",templateUrl:"app/authentication/views/register.html",controller:"RegisterCtrl",controllerAs:"rcl",resolve:{redirectIfNotAuthenticated:["$q","$auth","$state","userData","changeBrowserURL",o]}}).state("logout",{url:"/logout",controller:"LogoutCtrl"}).state("login",{url:"/login",templateUrl:"app/authentication/views/login.html",controller:"LoginController",controllerAs:"login",resolve:{redirectIfNotAuthenticated:["$q","$auth","$state","userData","changeBrowserURL",o]}}),r.loginUrl=n+"/login",r.signupUrl=n+"/signup",r.facebook({clientId:a,url:n+"/auth/facebook",redirectUri:"http://www.ofline.in/"})}function o(e,t,o,r,a){var n=e.defer();return t.isAuthenticated()?(n.reject(),a.changeBrowserURLMethod("/home")):n.resolve(),n.promise}e.module("authModApp",[]).config(["$stateProvider","$httpProvider","$authProvider",t])}(window.angular),function(e){"use strict";function t(e,t,o){var r=e.defer();return t.isAuthenticated()?r.resolve():(r.reject(),o.changeBrowserURLMethod("/home")),r.promise}function o(e,t,o,r,a){var n=e.defer(),i=o.creator1,s=o.creator2;return t.isAuthenticated()?s==i?(n.reject(),a.changeBrowserURLMethod("/home")):r.getUser()._id==i||r.getUser()._id==s?n.resolve():(n.reject(),a.changeBrowserURLMethod("/home")):(n.reject(),a.changeBrowserURLMethod("/home")),n.promise}e.module("app.chat",[]).config(["$stateProvider",function(e){e.state("tabs.chatBox",{url:"/chatBox/:creator1/:creator2",views:{"chatRooms-tab":{templateUrl:"app/chat/views/chatBox.html",controller:"ChatBoxController",controllerAs:"cbc",resolve:{redirectIfNotAuthenticated:["$q","$auth","$stateParams","userData","changeBrowserURL",o]}}}}).state("tabs.chatRooms",{url:"/chatRoomsTab",views:{"chatRooms-tab":{templateUrl:"app/chat/views/chatRoomList.html",resolve:{redirectIfNotUserAuthenticated:["$q","$auth","changeBrowserURL",t]}}}})}])}(window.angular),function(e){"use strict";e.module("app.common",[])}(window.angular),function(e){"use strict";e.module("app.event",[]).config(["$stateProvider",function(e){e.state("eventsLocation",{url:"/events/:location/:slug?",templateUrl:"app/event/views/eventsPage.html",controller:"EventsPageController",controllerAs:"ospc"}).state("eventPage",{url:"/event/:eventId",templateUrl:"app/event/views/eventPage.html",controller:"EventPageController",controllerAs:"opc"})}])}(window.angular),function(e){"use strict";function t(e){e.state("searchBoxPage",{url:"/searchBoxPage",templateUrl:"app/home/views/searchBoxPage.html",controller:"SearchBoxPageController",controllerAs:"sbpc"}).state("citySearchPage",{url:"/citySearchPage",templateUrl:"app/home/views/citySearchPage.html",controller:"CitySearchPageController",controllerAs:"cspc"}).state("entitySearchPage",{url:"/entitySearchPage",templateUrl:"app/home/views/entitySearchPage.html",controller:"EntitySearchPageController",controllerAs:"espc"}).state("tabs",{url:"/tab",abstract:!0,templateUrl:"app/home/views/tabs.html",controller:"TabsController",controllerAs:"tc"}).state("tabs.home",{url:"/tabsHome",cache:!1,views:{"home-tab":{templateUrl:"app/home/views/mobileHomePage.html",controller:"HomeController",controllerAs:"hm"}}}).state("tabs.mePage",{url:"/mePage",views:{"mePage-tab":{templateUrl:"app/user/views/userMePage.html",controller:"UserMePageController",controllerAs:"umpc",resolve:{redirectIfNotUserAuthenticated:["$q","$auth","changeBrowserURL",o]}}}})}function o(e,t,o){var r=e.defer();return t.isAuthenticated()?r.resolve():(r.reject(),o.changeBrowserURLMethod("/home")),r.promise}e.module("app.home",[]).config(["$stateProvider",t])}(window.angular),function(e){"use strict";e.module("app.offer",[]).config(["$stateProvider",function(e){e.state("tabs.offers",{url:"/offers",abstract:!0,views:{"offer-tab":{templateUrl:"app/offer/views/offersCollectionParent.html",controller:"OffersParentController",controllerAs:"ocp"}},resolve:{positions:["userLocationService",function(e){return e.getUserLocation()}]}}).state("tabs.offers.offersCollectionLocation",{views:{"offer-tab":{templateUrl:"app/offer/views/offersCollection.html",controller:"OffersPageController",controllerAs:"ospc"}},url:"/offersCollection/:location"}).state("offerPage",{url:"/offer/:offerId",templateUrl:"app/offer/views/offerPage.html",controller:"OfferPageController",controllerAs:"opc"})}])}(window.angular),function(e){"use strict";e.module("app.product",[]).config(["$stateProvider",function(e){e.state("tabs.productsCollectionName",{url:"/productsCollectionName/:productName/:location",views:{"product-tab":{templateUrl:"app/product/views/productsNameCollection.html",controller:"ProductNameCollectionController",controllerAs:"pncc"}}}).state("tabs.productsCollectionCategory",{url:"/productsCollectionCategory/:category/:location",views:{"product-tab":{templateUrl:"app/product/views/productsCategoryCollection.html",controller:"ProductCategoryCollectionController",controllerAs:"pccc"}}}).state("tabs.productsCollectionSubCategory",{url:"/productsCollectionSubCategory/:subCategory/:location",views:{"product-tab":{templateUrl:"app/product/views/productsSubCategoryCollection.html",controller:"ProductSubCategoryCollectionController",controllerAs:"pscc"}}}).state("tabs.singleProductPage",{url:"/product/singleProduct/:productId",views:{"product-tab":{templateUrl:"app/product/views/singleProduct.html",controller:"SingleProductController",controllerAs:"spc"}}}).state("tabs.productsCollectionLocation",{url:"/productsCollectionLocation/:location",views:{"product-tab":{templateUrl:"app/product/views/productsLocationCollection.html",controller:"ProductsLocationController",controllerAs:"plc"}}})}])}(window.angular),function(e){"use strict";e.module("app.review",[])}(window.angular),function(e){"use strict";e.module("app.store",[]).config(["$stateProvider",function(e){e.state("tabs.storesCollectionName",{url:"/store/storesCollection/storeName/:storeName/:location",views:{"store-tab":{templateUrl:"app/store/views/storesNameCollection.html",controller:"StoreNameCollectionController",controllerAs:"sncc"}}}).state("tabs.storesCollectionCategory",{url:"/store/storesCollection/category/:category/:location",views:{"store-tab":{templateUrl:"app/store/views/storesCategoryCollection.html",controller:"StoreCategoryCollectionController",controllerAs:"sccc"}}}).state("tabs.storesCollectionLocation",{url:"/store/storesCollection/location/:location",views:{"store-tab":{templateUrl:"app/store/views/storesLocationCollection.html",controller:"StoreLocationCollectionController",controllerAs:"slcc"}}}).state("tabs.singleStorePage",{url:"/store/singleStore/:storeId",views:{"store-tab":{templateUrl:"app/store/views/singleStore.html",controller:"SingleStoreController",controllerAs:"ssc"}}})}])}(window.angular),function(e){"use strict";function t(e,t,o){var r=e.defer();return t.isAuthenticated()?r.resolve():(r.reject(),o.changeBrowserURLMethod("/home")),r.promise}e.module("app.user",[]).config(["$stateProvider",function(e){e.state("tabs.userFeed",{url:"/userFeedTab",views:{"userFeed-tab":{templateUrl:"app/user/views/userMobileFeed.html",controller:"UserMobileFeedController",controllerAs:"umfc"}}}).state("tabs.userPage",{url:"/user/:userId",views:{"userFeed-tab":{templateUrl:"app/user/views/userProfilePage.html",controller:"UserPageController",controllerAs:"upc"}}}).state("tabs.userProfileSettings",{url:"/userProfileSettings",views:{"userFeed-tab":{templateUrl:"app/user/views/userProfileSettingsPage.html",resolve:{redirectIfNotUserAuthenticated:["$q","$auth","changeBrowserURL",t]}}}}).state("tabs.userAccountSettings",{url:"/userAccountSettings",views:{"userFeed-tab":{templateUrl:"app/user/views/userAccountSettingsPage.html",resolve:{redirectIfNotUserAuthenticated:["$q","$auth","changeBrowserURL",t]}}}}).state("tabs.userMePage",{url:"/userMePage",views:{"userFeed-tab":{templateUrl:"app/user/views/userMePage.html",controller:"UserMePageController",controllerAs:"umpc",resolve:{redirectIfNotUserAuthenticated:["$q","$auth","changeBrowserURL",t]}}}})}])}(window.angular),function(e){"use strict";e.module("app.common",[])}(window.angular),function(e){"use strict";function t(e,t){this.getCities=function(){var o=this;return o.cityData=e.get(t.baseUrl+"store/cities"),o.cityData}}function o(e,t){this.getSearches=function(o){var r=this;r.searchesData=void 0;var a=e.baseUrl+"search/searches/"+o;return r.searchesData=t.get(a),r.searchesData},this.getAjaxSearches=function(o,r){var a=e.baseUrl+"search/searches/"+o+"/"+r;return t.get(a)}}function r(e){this.getService=function(t){return e.get(t)}}function a(){this.sortByKey=function(e,t){return e.sort(function(e,o){var r=e[t],a=o[t];return r<a?-1:r>a?1:0})}}function n(e){this.changeBrowserURLMethod=function(t,o){o&&e.path(t).search({param:o}),e.path(t)}}function i(){this.getArrayFunction=function(e,t){for(var o=[],r=e.length-1;r>=0;r--)o.push(e[r][t]);return o}}function s(){this.getUniqueCopyFunction=function(t,o){return e.forEach(t,function(e){o.indexOf(e)==-1&&o.push(e)}),o}}function l(){}function c(e,t){var o=(e.localStorage,{setCity:function(e){o.city=e,t.$broadcast("city-changed")},getCity:function(){return o.city||"hyderabad"},isCityExists:function(){return!!o.getCity()}});return o}function u(e){this.baseUrl="http://localhost:3000/",this.currentUrl=e.absUrl().split("?")[0],this.currentUrlWQ=e.absUrl(),console.log("base"),console.log(this.baseUrl),this.getStoresWithCatgeoryLocation=this.baseUrl+"store/storesCollection/category/",this.getStoresWithNameLocation=this.baseUrl+"store/storesCollection/storeName/",this.getSingleStoreWithId=this.baseUrl+"store/singleStore/",this.getProductsWithCatgeoryLocation=this.baseUrl+"product/productsCollection/category/",this.getProductsWithSubCatgeoryLocation=this.baseUrl+"product/productsCollection/subCategory/",this.getProductsWithNameLocation=this.baseUrl+"product/productsCollection/productName/",this.getProductsWithStoreId=this.baseUrl+"product/productsCollection/store/",this.getSingleProductWithId=this.baseUrl+"product/singleProduct/",this.getCategoriesWithLocation=this.baseUrl+"categories/location"}function d(e,t){function o(o){return e.get(t.baseUrl+"store/areas/"+o)}this.getCityAreas=o}function g(e,t){function o(o){return e.get(t.baseUrl+"store/categories/"+o)}this.getCityCategories=o}function f(e,t){function o(o){return e.get(t.baseUrl+"product/areas/"+o)}this.getCityAreas=o}function p(e,t){function o(o){return e.get(t.baseUrl+"product/categories/"+o)}this.getCityCategories=o}function m(e,t){function o(o){return e.get(t.baseUrl+"product/subCategories/"+o)}this.getCitySubCategories=o}e.module("app.common").service("citiesService",["$http","baseUrlService",t]).service("getCategoryService",[function(){}]).service("searchService",["baseUrlService","$http",o]).service("httpService",["$http",r]).service("sortService",[a]).service("changeBrowserURL",["$location",n]).service("arrayObjectMapper",[i]).service("arrayUniqueCopy",[s]).service("userLocationService",[l]).service("baseUrlService",["$location",u]).service("getCityAreasService",["$http","baseUrlService",d]).service("getCityCategoriesService",["$http","baseUrlService",g]).service("getCityProductAreasService",["$http","baseUrlService",f]).service("getCityProductCategoriesService",["$http","baseUrlService",p]).service("getCityProductSubCategoriesService",["$http","baseUrlService",m]).factory("cityStorage",["$window","$rootScope",c])}(window.angular),function(e){"use strict";function t(){return{restrict:"E",replace:!0,templateUrl:"app/common/views/imagesList.html",scope:{imagesList:"="},link:function(e,t,o){}}}function o(){return{restrict:"E",replace:!0,templateUrl:"app/common/views/singleImage.html",scope:{image:"="},link:function(e,t,o){}}}function r(e){return{restrict:"A",link:function(t,o,r){t.$watch(function(){return t.$eval(r.bindHtmlCompile)},function(a){o.html(a&&a.toString());var n=t;r.bindHtmlScope&&(n=t.$eval(r.bindHtmlScope)),e(o.contents())(n)})}}}function a(e,t){return{restrict:"A",link:function(e,o,r){var a=t.path();$(o[0]).on("click",function(){$(r.toggleElement).slideToggle()});a.indexOf("/home")==-1}}}function n(e,t){return{restrict:"A",link:function(e,o,r){var a=0,n=t.path();n.indexOf("/home")==-1&&$(window).on("scroll",function(){if(windowWidth=window.innerWidth?window.innerWidth:$(window).width(),n.indexOf("/home")==-1&&$(window).scrollTop()>170&&windowWidth<=601&&n.indexOf("/home")==-1&&$(window).scrollTop()>170){var t=$(this).scrollTop();t>a?$(".scrollUpSearch").slideUp("fast"):$(".scrollUpSearch").slideDown("fast"),a=t,e.$apply()}})}}}function i(e,t){return{restrict:"A",link:function(e,t,o){$(t).on("click",function(){var t=window.innerWidth?window.innerWidth:$(window).width();t<=961&&($(o.toggleMobile).slideToggle(),e.$apply())})}}}function s(){return{restrict:"E",replace:!0,scope:{loading:"=loading"},template:'<div class="ajaxLoadingSpinnerDiv"><div class="ajaxLoadingSpinner"></div></div>',link:function(e,t,o){e.$watch("loading",function(e){e?$(t).show():$(t).hide()})}}}function l(){return{restrict:"E",replace:!0,scope:{loading:"=innerLoading",containerHeight:"@containerHeight"},templateUrl:"app/common/views/innerLoadingTemplate.html",link:function(e,t,o){e.$watch("loading",function(e){e?$(t).show():$(t).hide()}),$(".innerLoadingContainer").height(e.containerHeight)}}}function c(){return{restrict:"EA",replace:!0,scope:{smallLoading:"=smallLoading"},template:'<span style="position:relative"><div class="spinner"></div></span>',link:function(e,t,o){e.$watch("smallLoading",function(e){e?$(t).show():$(t).hide()})}}}function u(){return{restrict:"A",link:function(e,t,o){$("meta[name=Keywords]").attr("content"),$("meta[name=Description]").attr("content");console.log()}}}function d(){return{restrict:"E",scope:{upFn:"&upFn",downFn:"&downFn",upvChk:"&upvChk",smallLoading:"=smallLoading",currentReview:"=currentReview"},templateUrl:"app/reviews/views/likeReview.html"}}function g(){return{restrict:"E",scope:{upFn:"&upFn",downFn:"&downFn",upvChk:"&upvChk",smallLoading:"=smallLoading"},templateUrl:"app/user/views/userFollow.html"}}function f(){return{restrict:"A",link:function(e,t,o){$(t).css("background-image","url("+o.imageReplacementDirective+")")}}}e.module("app.common").directive("toggleElement",["$window","$location",a]).directive("scrollDown",["$window","$location",n]).directive("toggleMobile",["$window","$location",i]).directive("loadingDirective",[s]).directive("innerLoadingDirective",[l]).directive("metaTags",[u]).directive("likeDirective",[d]).directive("followDirective",[g]).directive("smallLoadingDirective",[c]).directive("bindHtmlCompile",["$compile",r]).directive("imageReplacementDirective",[f]).directive("imagesListDirective",[t]).directive("singleImageDirective",[o])}(window.angular),function(e){"use strict";e.module("app.review",[])}(window.angular),function(e){"use strict";function t(e,t,o,r,a){function n(){s.loading=!0,s.pageNo=s.pageNo+1,s.paramData={store:o.storeId,limit:100,page:1,populate:"store"},console.log(s.paramData),a.getEventCollection(s.paramData).then(function(e){console.log("events collection"),console.log(e),0===e.data.docs.length?s.noeventsToShow=!0:(s.noeventsToShow=!1,s.eventsList=e.data.docs),s.loading=!1},function(e){console.log(e)})}function i(){s.getEventsCollection()}var s=this;s.pageNo=0,s.eventsList=[],s.getEventsCollection=n,i()}e.module("app.event").controller("AdminEventsCollectionController",["$scope","$auth","$stateParams","changeBrowserURL","eventService",t])}(window.angular),function(e){"use strict";function t(e,t,o,r,a){function n(){s.loading=!0,s.pageNo=s.pageNo+1,s.paramData={store:o.storeId,limit:100,page:1,populate:"store"},console.log(s.paramData),a.getOfferCollection(s.paramData).then(function(e){console.log("offers collection"),console.log(e),0===e.data.docs.length?s.nooffersToShow=!0:(s.nooffersToShow=!1,s.offersList=e.data.docs),s.loading=!1},function(e){console.log(e)})}function i(){s.getOffersCollection()}var s=this;s.pageNo=0,s.offersList=[],s.getOffersCollection=n,i()}e.module("app.offer").controller("AdminOffersCollectionController",["$scope","$auth","$stateParams","changeBrowserURL","offerService",t])}(window.angular),function(e){"use strict";function t(e,t,o,r,a){function n(){o.getStore(t.storeId).then(function(e){i.storeData=e.data,i.loading=!1}),o.getStoreRating(t.storeId).then(function(e){i.storeData.storeRatingAvg=e.data})}var i=this;i.storeData={},n(),i.uploadStoreBanner=function(e,o){i.f=e,i.errFile=o&&o[0],e&&(i.bannerLoading=!0,e.upload=r.upload({url:a.baseUrl+"upload/storeBannerUpload/"+t.storeId,data:{file:e}}),e.upload.then(function(t){e.result=t.data,console.log(t.data),$(".adminStoreBannerImage").css("background-image","url("+t.data+")"),i.bannerLoading=!1}))}}e.module("app.admin").controller("AdminStoreController",["$scope","$stateParams","getSingleStore","Upload","baseUrlService",t])}(window.angular),function(e){"use strict";function t(t,o,r,a,n,i,s,l){function c(){d.eventForm.bannerImage=d.eventForm.bannerImage||d.eventForm.eventImages[0],s.createEvent(l.storeId,d.eventForm).then(function(e){console.log(e.data._id),userData.setUser(),n.show(n.alert().clickOutsideToClose(!0).title("Event created").textContent("Your Event has been created.").ariaLabel("Alert Dialog Demo").ok("Got it!")),i.url("/admin/adminEventPage/"+e.data._id)},function(e){console.log(e)})}function u(){}var d=this;d.eventForm={},d.eventForm.eventImages=[],d.eventForm.category=[],u(),d.createEvent=c,d.uploadSingleImage=function(e,t){d.f=e,d.errFile=t&&t[0],e&&(d.formBannerLoading=!0,e.upload=o.upload({url:a.baseUrl+"upload/singleUpload",data:{file:e}}),e.upload.then(function(t){e.result=t.data,d.uploadedImage=t.data,d.eventForm.bannerImage=d.uploadedImage,console.log("the banner image"),console.log(d.eventForm),d.formBannerLoading=!1}))},d.uploadMultipleImages=function(t){d.files=t,d.formImgListLoading=!0,e.forEach(t,function(e){d.formImgListLoading=!0,e.upload=o.upload({url:a.baseUrl+"upload/singleUpload",data:{file:e}}),e.upload.then(function(t){r(function(){e.result=t.data,console.log(t.data),d.eventForm.eventImages.push(t.data),d.formImgListLoading=!1})},function(e){e.status>0&&(d.errorMsg=e.status+": "+e.data)},function(t){e.progress=Math.min(100,parseInt(100*t.loaded/t.total))})})}}e.module("app.admin").controller("CreateEventController",["$scope","Upload","$timeout","baseUrlService","$mdDialog","$location","adminEventService","$stateParams",t])}(window.angular),function(e){"use strict";function t(t,o,r,a,n,i,s,l,c,u){function d(){console.log("the form"),console.log(h.offerForm),h.offerForm.bannerImage=h.offerForm.bannerImage||h.offerForm.offerImages[0],s.createOffer(l.storeId,h.offerForm).then(function(e){console.log(e.data._id),n.show(n.alert().clickOutsideToClose(!0).title("Offer created").textContent("Your Offer has been created.").ariaLabel("Alert Dialog Demo").ok("Got it!")),i.url("/admin/adminOfferPage/"+e.data._id)},function(e){console.log(e)})}function g(){f()}function f(){window.mapInit=function(){m()};var e=document.createElement("script");e.type="text/javascript",e.id="googleMaps";var t=document.getElementById("googleMaps");t&&(alert("hihihihit"),t.parentElement.removeChild(t));var o="AIzaSyDGTEBHgF0pPjYvmmrlHYLUyksDW70lNWU";e.src="https://maps.googleapis.com/maps/api/js?key="+o+"&libraries=places&callback=mapInit",document.body.appendChild(e)}function p(e){var o=document.getElementById("offer-map-input"),r=new google.maps.places.Autocomplete(o);r.addListener("place_changed",function(){var o=r.getPlace(),a=new google.maps.LatLng(o.geometry.location.lat(),o.geometry.location.lng());return o.geometry?(e.setPosition(a),e.setMap(t.map),void t.map.setCenter(a)):void window.alert("No details available for input: '"+o.name+"'")})}function m(){var e,o={timeout:1e4,enableHighAccuracy:!1};u.getCurrentPosition(o).then(function(o){h.offerForm.latitude=o.coords.latitude,h.offerForm.longitude=o.coords.longitude;var r=new google.maps.LatLng(o.coords.latitude,o.coords.longitude),a={center:r,zoom:15,mapTypeId:google.maps.MapTypeId.ROADMAP};t.map=new google.maps.Map(document.getElementById("googleMap"),a),google.maps.event.addListenerOnce(t.map,"idle",function(){e=new google.maps.Marker({map:t.map,animation:google.maps.Animation.DROP,position:r}),p(e)}),google.maps.event.addListener(t.map,"click",function(o){h.offerForm.latitude=o.latLng.lat(),h.offerForm.longitude=o.latLng.lng(),e?(e.setPosition(o.latLng),e.setMap(t.map)):e=new google.maps.Marker({position:o.latLng,map:t.map})})},function(e){alert("error"),console.log("error is here"),console.log(e)})}var h=this;h.offerForm={},h.offerForm.offerImages=[],h.offerForm.category=[],g(),h.createOffer=d,h.uploadSingleImage=function(e,t){h.f=e,h.errFile=t&&t[0],e&&(h.formBannerLoading=!0,e.upload=o.upload({url:a.baseUrl+"upload/singleUpload",data:{file:e}}),e.upload.then(function(t){e.result=t.data,h.uploadedImage=t.data,h.offerForm.bannerImage=h.uploadedImage,console.log("the banner image"),console.log(h.offerForm),h.formBannerLoading=!1}))},h.uploadMultipleImages=function(t){h.files=t,h.formImgListLoading=!0,e.forEach(t,function(e){h.formImgListLoading=!0,e.upload=o.upload({url:a.baseUrl+"upload/singleUpload",data:{file:e}}),e.upload.then(function(t){r(function(){e.result=t.data,console.log(t.data),h.offerForm.offerImages.push(t.data),h.formImgListLoading=!1})},function(e){e.status>0&&(h.errorMsg=e.status+": "+e.data)},function(t){e.progress=Math.min(100,parseInt(100*t.loaded/t.total))})})}}e.module("app.admin").controller("CreateOfferController",["$scope","Upload","$timeout","baseUrlService","$mdDialog","$location","adminOfferService","$stateParams","$state","$cordovaGeolocation",t])}(window.angular),function(e){"use strict";function t(t,o,r,a,n,i,s,l,c){function u(){n.createProduct(p.productForm,o.storeId).then(function(e){l.show(l.alert().clickOutsideToClose(!0).title("Product created").textContent("Your Product has been created.").ariaLabel("Alert Dialog Demo").ok("Got it!")),a.reload()},function(e){console.log(e)})}function d(){g()}function g(){alert("load started from product"),window.mapInit=function(){f()};var e=document.createElement("script");e.type="text/javascript",e.id="googleMaps";var t=document.getElementById("googleMaps");t&&(alert("hit tag in product"),t.parentElement.removeChild(t));var o="AIzaSyDGTEBHgF0pPjYvmmrlHYLUyksDW70lNWU";"undefined"!=typeof google&&"undefined"!=typeof google.maps||(alert("script added from product"),e.src="https://maps.google.com/maps/api/js?key="+o+"&callback=mapInit",document.body.appendChild(e))}function f(){var e,o={timeout:1e4,enableHighAccuracy:!1};c.getCurrentPosition(o).then(function(o){var r=new google.maps.LatLng(o.coords.latitude,o.coords.longitude),a={center:r,zoom:15,mapTypeId:google.maps.MapTypeId.ROADMAP};t.map=new google.maps.Map(document.getElementById("productGoogleMap"),a),google.maps.event.addListenerOnce(t.map,"idle",function(){e=new google.maps.Marker({map:t.map,animation:google.maps.Animation.DROP,position:r})}),google.maps.event.addListener(t.map,"click",function(o){alert("from product page"),alert(o.latLng),e?(e.setPosition(o.latLng),e.setMap(t.map)):e=new google.maps.Marker({position:o.latLng,map:t.map})})},function(e){alert("error"),console.log("error is here"),console.log(e)})}var p=this;p.productForm={},p.productForm.price={},p.productForm.category=[],p.productForm.subCategory=[],p.productForm.productImages=[],d(),p.createProduct=u,p.uploadMultipleImages=function(t){p.files=t,e.forEach(t,function(e){p.formImgListLoading=!0,e.upload=i.upload({url:s.baseUrl+"upload/singleUpload",data:{file:e}}),e.upload.then(function(t){r(function(){e.result=t.data,p.productForm.productImages.push(t.data),p.formImgListLoading=!1})},function(e){e.status>0&&(p.errorMsg=e.status+": "+e.data)},function(t){e.progress=Math.min(100,parseInt(100*t.loaded/t.total))})})},p.uploadSingleImage=function(e,t){p.f=e,p.errFile=t&&t[0],e&&(p.formBannerLoading=!0,e.upload=i.upload({url:s.baseUrl+"upload/singleUpload",data:{file:e}}),e.upload.then(function(t){e.result=t.data,p.productForm.bannerImage=t.data,$(".productMainImage").css("background-image","url("+t.data+")"),p.formBannerLoading=!1}))}}e.module("app.admin").controller("CreateProductController",["$scope","$stateParams","$timeout","$state","adminProductService","Upload","baseUrlService","$mdDialog","$cordovaGeolocation",t])}(window.angular),function(e){"use strict";function t(t,o,r,a,n,i,s,l){function c(){d.storeForm.bannerImage=d.storeForm.bannerImage||d.storeForm.storeImages[0],o.createStore(d.storeForm).then(function(e){console.log(e.data._id),a.setUser(),l.show(l.alert().clickOutsideToClose(!0).title("Store created").textContent("Your Store has been created.").ariaLabel("Alert Dialog Demo").ok("Got it!")),s.url("/admin/adminStorePage/"+e.data._id)},function(e){console.log(e)})}function u(){}var d=this;d.storeForm={},d.storeForm.storeImages=[],d.storeForm.category=[],d.storeForm.subCategory=[],u(),d.createStore=c,d.uploadSingleImage=function(e,t){d.f=e,d.errFile=t&&t[0],e&&(d.formBannerLoading=!0,e.upload=r.upload({url:i.baseUrl+"upload/singleUpload",data:{file:e}}),e.upload.then(function(t){e.result=t.data,d.uploadedImage=t.data,d.storeForm.bannerImage=d.uploadedImage,console.log("the banner image"),console.log(d.storeForm),$(".adminStoreBannerImage").css("background-image","url("+t.data+")"),d.formBannerLoading=!1}))},d.uploadMultipleImages=function(t){d.files=t,d.formImgListLoading=!0,e.forEach(t,function(e){d.formImgListLoading=!0,e.upload=r.upload({url:i.baseUrl+"upload/singleUpload",data:{file:e}}),e.upload.then(function(t){n(function(){e.result=t.data,console.log(t.data),d.storeForm.storeImages.push(t.data),d.formImgListLoading=!1})},function(e){e.status>0&&(d.errorMsg=e.status+": "+e.data)},function(t){e.progress=Math.min(100,parseInt(100*t.loaded/t.total))})})}}e.module("app.admin").controller("CreateStoreController",["$auth","adminStoreService","Upload","userData","$timeout","baseUrlService","$location","$mdDialog",t])}(window.angular),function(e){"use strict";function t(t,o,r,a,n,i,s,l){function c(){d.eventForm.bannerImage=d.eventForm.bannerImage||d.eventForm.eventImages[0],l.updateEvent(i.eventId,i.storeId,d.eventForm).then(function(e){console.log(e.data._id),n.show(n.alert().clickOutsideToClose(!0).title("Event created").textContent("Your Event has been edited.").ariaLabel("Alert Dialog Demo").ok("Got it!")),s.url("/event/"+e.data._id)},function(e){console.log(e)})}function u(){l.getEvent(i.eventId,i.storeId).then(function(e){e.data.startDate=new Date(e.data.startDate),e.data.endDate=new Date(e.data.endDate),console.log(e),d.eventForm=e.data})}var d=this;d.eventForm={},d.eventForm.eventImages=[],d.eventForm.category=[],u(),d.createEvent=c,d.uploadSingleImage=function(e,t){d.f=e,d.errFile=t&&t[0],e&&(d.formBannerLoading=!0,e.upload=o.upload({url:a.baseUrl+"upload/singleUpload",data:{file:e}}),e.upload.then(function(t){e.result=t.data,d.uploadedImage=t.data,d.eventForm.bannerImage=d.uploadedImage,console.log("the banner image"),console.log(d.eventForm),$(".adminEventBannerImage").css("background-image","url("+t.data+")"),d.formBannerLoading=!1}))},d.uploadMultipleImages=function(t){d.files=t,d.formImgListLoading=!0,e.forEach(t,function(e){d.formImgListLoading=!0,e.upload=o.upload({url:a.baseUrl+"upload/singleUpload",data:{file:e}}),e.upload.then(function(t){r(function(){e.result=t.data,console.log(t.data),d.eventForm.eventImages.push(t.data),d.formImgListLoading=!1})},function(e){e.status>0&&(d.errorMsg=e.status+": "+e.data)},function(t){e.progress=Math.min(100,parseInt(100*t.loaded/t.total))})})}}e.module("app.admin").controller("EditEventController",["$scope","Upload","$timeout","baseUrlService","$mdDialog","$stateParams","$location","adminEventService",t])}(window.angular),function(e){"use strict";function t(t,o,r,a,n,i,s,l){function c(){d.offerForm.bannerImage=d.offerForm.bannerImage||d.offerForm.offerImages[0],l.updateOffer(i.offerId,i.storeId,d.offerForm).then(function(e){console.log(e.data._id),n.show(n.alert().clickOutsideToClose(!0).title("Offer created").textContent("Your Offer has been edited.").ariaLabel("Alert Dialog Demo").ok("Got it!")),s.url("/offer/"+e.data._id)},function(e){console.log(e)})}function u(){l.getOffer(i.offerId,i.storeId).then(function(e){e.data.startDate=new Date(e.data.startDate),e.data.endDate=new Date(e.data.endDate),
console.log(e),d.offerForm=e.data})}var d=this;d.offerForm={},d.offerForm.offerImages=[],d.offerForm.category=[],u(),d.createOffer=c,d.uploadSingleImage=function(e,t){d.f=e,d.errFile=t&&t[0],e&&(d.formBannerLoading=!0,e.upload=o.upload({url:a.baseUrl+"upload/singleUpload",data:{file:e}}),e.upload.then(function(t){e.result=t.data,d.uploadedImage=t.data,d.offerForm.bannerImage=d.uploadedImage,console.log("the banner image"),console.log(d.offerForm),$(".adminOfferBannerImage").css("background-image","url("+t.data+")"),d.formBannerLoading=!1}))},d.uploadMultipleImages=function(t){d.files=t,d.formImgListLoading=!0,e.forEach(t,function(e){d.formImgListLoading=!0,e.upload=o.upload({url:a.baseUrl+"upload/singleUpload",data:{file:e}}),e.upload.then(function(t){r(function(){e.result=t.data,console.log(t.data),d.offerForm.offerImages.push(t.data),d.formImgListLoading=!1})},function(e){e.status>0&&(d.errorMsg=e.status+": "+e.data)},function(t){e.progress=Math.min(100,parseInt(100*t.loaded/t.total))})})}}e.module("app.admin").controller("EditOfferController",["$scope","Upload","$timeout","baseUrlService","$mdDialog","$stateParams","$location","adminOfferService",t])}(window.angular),function(e){"use strict";function t(t,o,r,a,n,i,s){function l(){o.updateProduct(r.storeId,n._id,u.productForm).then(function(e){console.log(e),a.show(a.alert().clickOutsideToClose(!0).title("Product Edited").textContent("Your Product has been edited.").ariaLabel("Alert Dialog Demo").ok("Got it!"))},function(e){console.log(e)})}function c(){}var u=this;u.productForm=n,c(),u.createProduct=l,u.uploadMultipleImages=function(t){u.files=t,e.forEach(t,function(e){u.formImgListLoading=!0,e.upload=i.upload({url:s.baseUrl+"upload/singleUpload",data:{file:e}}),e.upload.then(function(t){$timeout(function(){e.result=t.data,u.productForm.productImages.push(t.data),u.formImgListLoading=!1})},function(e){e.status>0&&(u.errorMsg=e.status+": "+e.data)},function(t){e.progress=Math.min(100,parseInt(100*t.loaded/t.total))})})},u.uploadSingleImage=function(e,t){u.f=e,u.errFile=t&&t[0],e&&(u.formBannerLoading=!0,e.upload=i.upload({url:s.baseUrl+"upload/singleUpload",data:{file:e}}),e.upload.then(function(t){e.result=t.data,u.productForm.bannerImage=t.data,$(".productMainImage").css("background-image","url("+t.data+")"),u.formBannerLoading=!1}))}}e.module("app.admin").controller("EditProductController",["$auth","adminProductService","$stateParams","$mdDialog","product","Upload","baseUrlService",t])}(window.angular),function(e){"use strict";function t(t,o,r,a,n,i,s,l){function c(){r.updateStore(n.storeId,d.storeForm).then(function(e){console.log(e),l.show(l.alert().clickOutsideToClose(!0).title("Store edited").textContent("Your Store has been edited.").ariaLabel("Alert Dialog Demo").ok("Got it!")),o.reload()},function(e){console.log(e)})}function u(){r.getStore(n.storeId).then(function(e){e.data.category=e.data.category,e.data.subCategory=e.data.subCategory,e.data.keywords=e.data.keywords.join(","),console.log(e),d.storeForm=e.data})}var d=this;d.storeForm={},u(),d.createStore=c,d.uploadSingleImage=function(e,t){console.log("Enterd file uploading"),d.f=e,d.errFile=t&&t[0],e&&(d.formBannerLoading=!0,e.upload=a.upload({url:s.baseUrl+"upload/singleUpload",data:{file:e}}),d.spinnerLoading=!0,e.upload.then(function(t){e.result=t.data,d.storeForm.bannerImage=t.data,d.formBannerLoading=!1}))},d.uploadMultipleImages=function(t){d.files=t,e.forEach(t,function(e){d.formImgListLoading=!0,e.upload=a.upload({url:s.baseUrl+"upload/singleUpload",data:{file:e}}),e.upload.then(function(t){i(function(){e.result=t.data,console.log(t.data),d.storeForm.storeImages.push(t.data),d.formImgListLoading=!1})},function(e){e.status>0&&(d.errorMsg=e.status+": "+e.data)},function(t){e.progress=Math.min(100,parseInt(100*t.loaded/t.total))})})}}e.module("app.admin").controller("EditStoreController",["$auth","$state","adminStoreService","Upload","$stateParams","$timeout","baseUrlService","$mdDialog",t])}(window.angular),function(e){"use strict";function t(){var e=this;e.tab=1,e.setTab=function(t){e.tab=t},e.isSet=function(t){return e.tab===t}}e.module("app.admin").controller("StoreStatisticsController",[t])}(window.angular),function(e){"use strict";function t(e,t){function o(o,r){return e.post(t.baseUrl+"admin/events/"+o,r)}function r(o,r,a){return e.put(t.baseUrl+"admin/event/"+r+"/"+o,a)}function a(o,r,a){return e.get(t.baseUrl+"admin/event/"+r+"/"+o,{params:a})}function n(){}this.createEvent=o,this.getEvent=a,this.updateEvent=r,this.deleteEvent=n}e.module("app.event").service("adminEventService",["$http","baseUrlService","changeBrowserURL",t])}(window.angular),function(e){"use strict";function t(e,t){function o(o,r){return e.post(t.baseUrl+"admin/offers/"+o,r)}function r(o,r,a){return e.put(t.baseUrl+"admin/offer/"+r+"/"+o,a)}function a(o,r,a){return e.get(t.baseUrl+"admin/offer/"+r+"/"+o,{params:a})}function n(){}this.createOffer=o,this.getOffer=a,this.updateOffer=r,this.deleteOffer=n}e.module("app.offer").service("adminOfferService",["$http","baseUrlService","changeBrowserURL",t])}(window.angular),function(e){"use strict";function t(e,t,o){function r(o,r){return e.get(t.baseUrl)}function a(o,r){return e.post(t.baseUrl+"admin/products/"+r,o)}function n(o,r,a){return console.log("entered product update"),console.log(a),e.put(t.baseUrl+"admin/product/"+r+"/"+o,a)}function i(o,r){return e.get(t.baseUrl+"admin/product/"+o,{params:r})}function s(){}this.checkProductAdmin=r,this.createProduct=a,this.getProduct=i,this.updateProduct=n,this.deleteProduct=s}e.module("app.admin").service("adminProductService",["$http","baseUrlService","changeBrowserURL",t])}(window.angular),function(e){"use strict";function t(e,t,o){function r(o,r){return e.get(t.baseUrl)}function a(o){return e.post(t.baseUrl+"admin/stores",o)}function n(o,r){return e.put(t.baseUrl+"admin/store/"+o,r)}function i(o,r){return e.get(t.baseUrl+"admin/store/"+o,{params:r})}function s(){}this.checkStoreAdmin=r,this.createStore=a,this.getStore=i,this.updateStore=n,this.deleteStore=s}e.module("app.admin").service("adminStoreService",["$http","baseUrlService","changeBrowserURL",t])}(window.angular),function(e){"use strict";function t(e,t,o,r,a,n,i,s){function l(){i.cancel()}function c(e){console.log("entered auth"),o.socialAuthenticate(e)}function u(){t.changeBrowserURLMethod("/")}function d(){t.changeBrowserURLMethod("/login")}function g(e){r.authenticate(e).then(function(e){s.setUser(e.data.user),alert("login with facebook successfull"),a.location.reload()})}function f(){r.logout(),s.removeUser(),u()}var p=this;p.toHomePage=u,p.authenticate=g,p.authLogout=f,p.loginPage=d,p.socialAuthenticate=c,p.cancelDialog=l,p.tab=1,p.setTab=function(e){p.tab=e},p.isSet=function(e){return p.tab===e},p.isAuth=r.isAuthenticated()}e.module("app.home").controller("AuthenticationModalController",["$scope","changeBrowserURL","userAuthService","$auth","$window","$state","$mdDialog","userData",t])}(window.angular),function(e){"use strict";function t(e,t,o,r){function a(){e.go("/signup")}function n(){o.login(i.user).then(function(e){r.setUser(e.data.user),alert("Login successfull"),t.location.reload()},function(e){i.message=e.data.message,console.log(e)})}var i=this;i.user={},i.submitLogin=n,i.signUp=a,i.authenticate=function(t){o.authenticate(t),e.go("/")}}e.module("authModApp").controller("LoginController",["$state","$window","$auth","userData",t])}(window.angular),function(e){"use strict";function t(e,t,o){function r(){o.signup(a.user).then(function(e){console.log(e),a.message=e.data.message},function(e){a.message=e.data.message,console.log(e)})}var a=this;a.user={},a.formSubmit=r}e.module("authModApp").controller("RegisterCtrl",["$scope","userData","$auth",t])}(window.angular),function(e){"use strict";e.module("authModApp").directive("sameAs",function(){return{require:"ngModel",restrict:"EA",link:function(e,t,o,r){function a(t){var a=t===e.$eval(o.sameAs);return r.$setValidity("equal",a),a?t:void 0}console.log(o),console.log(o.sameAs),r.$parsers.push(a),r.$formatters.push(a),e.$watch(o.sameAs,function(){r.$setViewValue(r.$viewValue)})}}})}(window.angular),function(e){"use strict";function t(t,o,r,a,n,i){function s(t){a.show({controller:"AuthenticationModalController",controllerAs:"amc",templateUrl:"app/authentication/views/authenticationModalTemplate.html",parent:e.element(document.body),targetEvent:t,clickOutsideToClose:!0,fullscreen:!0}).then(function(e){},function(){})}function l(e){o.authenticate(e).then(function(e){n.setUser(e.data.user),alert("login with facebook successfull"),i.location.reload()})}this.socialAuthenticate=l,this.showAuthenticationDialog=s}e.module("authModApp").service("userAuthService",["$http","$auth","baseUrlService","$mdDialog","userData","$window",t])}(window.angular),function(e){"use strict";function t(e,t,o,r,a,n){var i=e.localStorage,s={},l={setUser:function(e){if(e)i.setItem("user",JSON.stringify(e));else{var t=o.getPayload().sub;t&&r.get(a.baseUrl+"authenticate/user/"+t).then(function(e){l.isUserExists()&&i.removeItem("user"),i.setItem("user",JSON.stringify(e.data.user))},function(e){console.log(e)})}},getUser:function(){return JSON.parse(i.getItem("user"))},removeUser:function(){s=null,i.removeItem("user")},isUserExists:function(){return!!l.getUser()},getUserPage:function(e){var t="/user/"+e;n.changeBrowserURLMethod(t)}};return l}e.module("authModApp").factory("userData",["$window","$state","$auth","$http","baseUrlService","changeBrowserURL",t])}(window.angular),function(e){"use strict";function t(e,t,o,r,a,n){function i(){a.getChatMessages(c.chatRoomId).then(function(e){c.chatList=e.data[0].chats,$(".chatBoxUL").animate({scrollTop:99999999},"slow"),c.innerLoading=!1},function(e){console.log(e)})}function s(){a.getChatRoom().then(function(e){console.log("the response the room"),console.log(e),c.chatRoomId=e.data._id,c.receiverUserId=e.data.creator1==c.currentUser?e.data.creator2:e.data.creator1,console.log("the reciver id"+c.receiverUserId),l(),i(),n.getUserDetails(c.receiverUserId,{fields:"displayName firstName"}).then(function(e){console.log("the receiver"),console.log(e.data),c.receiverUser=e.data.displayName||e.data.firstName})},function(e){console.log(e)})}function l(){t.emit("addToRoom",{roomId:c.chatRoomId}),t.on("messageSaved",function(e){c.chatList.push(e),$(".chatBoxUL").animate({scrollTop:99999999},"slow")})}var c=this;c.currentUser=r.getUser()._id,c.receiverUser="",c.innerLoading=!0,c.chatRoomId="",c.messageLoading=!1,s(),c.sendMsg=function(e){if(13==e.which&&!e.shiftKey&&c.myMsg){c.messageLoading=!0;var t={message:c.myMsg,user:c.currentUser,roomId:c.chatRoomId};a.sendChatMessage(t).then(function(e){c.myMsg="",c.messageLoading=!1},function(e){console.log(e)})}},c.clickSubmit=function(){if(c.myMsg){c.messageLoading=!0;var e={message:c.myMsg,user:c.currentUser,roomId:c.chatRoomId};a.sendChatMessage(e).then(function(e){c.myMsg="",c.messageLoading=!1},function(e){console.log(e)})}}}e.module("app.chat").controller("ChatBoxController",["$scope","Socket","$stateParams","userData","chatService","userService",t])}(window.angular),function(e){"use strict";function t(e,t,o,r,a){function n(e){a.go("tabs.chatBox",{creator1:e.creator1._id,creator2:e.creator2._id})}function i(){r.getChatRoomList(l.currentUser).then(function(e){l.chatRoomList=e.data,l.innerLoading=!1},function(e){console.log(e)})}function s(){i()}var l=this;l.currentUser=o.getUser()._id,l.innerLoading=!0,s(),l.openChatbox=n}e.module("app.chat").controller("ChatRoomListController",["$scope","$stateParams","userData","chatService","$state",t])}(window.angular),function(e){"use strict";function t(e,t,o){function r(t){return e.post(o.baseUrl+"chat/chats/"+t.roomId,t)}function a(t){return e.get(o.baseUrl+"chat/chats/"+t)}function n(){return e.get(o.baseUrl+"chat/chatBox/"+t.creator1+"/"+t.creator2)}function i(t){return e.get(o.baseUrl+"chat/chatRooms/"+t)}var s=this;s.sendChatMessage=r,s.getChatMessages=a,s.getChatRoom=n,s.getChatRoomList=i}e.module("app.chat").service("chatService",["$http","$stateParams","baseUrlService",t])}(window.angular),function(e){"use strict";function t(e,t){return e({prefix:"",ioSocket:io.connect(t.baseUrl)})}e.module("app.chat").factory("Socket",["socketFactory","baseUrlService",t])}(window.angular),function(e){"use strict";function t(e,t,o){return e({prefix:"",ioSocket:io.connect(o.baseUrl+t.getUser()._id)})}e.module("app.chat").factory("SocketUserService",["socketFactory","userData","baseUrlService",t])}(window.angular),function(e){"use strict";function t(e,t,o,r,a,n,i){function s(){i.share({provider:"facebook",attrs:{socialshareUrl:n.currentUrlWQ,socialshareText:"Offline Events",socialshareVia:"1068203956594250"}})}function l(){a.getSingleEvent(o.eventId).then(function(e){console.log("single event"),console.log(e),c.eventData=e.data,c.eventData.address.latitude?c.pos=[c.eventData.address.latitude,c.eventData.address.longitude]:c.pos=[17.361625,78.474622]},function(e){console.log(e)}).catch(function(e){console.log("Error: ",e)}).finally(function(){console.log("This finally block")})}var c=this;c.eventData={},l(),c.shareFacebook=s,console.log("sd"+n.currentUrlWQ)}e.module("app.event").controller("EventPageController",["$scope","$auth","$stateParams","changeBrowserURL","eventService","baseUrlService","Socialshare",t])}(window.angular),function(e){"use strict";function t(e,t,o,r,a){function n(e){var t="event/"+e._id;r.changeBrowserURLMethod(t)}function i(){l.loading=!0,l.pageNo=l.pageNo+1;o.location;l.paramData={store:o.storeId,limit:100,page:1,populate:"store"},a.getEventCollection(l.paramData).then(function(e){console.log("events collection"),console.log(e),0===e.data.docs.length?l.noeventsToShow=!0:(l.noeventsToShow=!1,l.eventsList=e.data.docs),l.loading=!1},function(e){console.log(e)})}function s(){l.getEventsCollection()}var l=this;l.pageNo=0,l.eventsList=[],l.getSingleevent=n,l.getEventsCollection=i,s(),e.$on("parent",function(e,t){l.pageNo=0,l.paramData=t,l.geteventsCollection()})}e.module("app.event").controller("EventsCollectionController",["$scope","$auth","$stateParams","changeBrowserURL","eventService",t])}(window.angular),function(e){"use strict";function t(e,t,o,r,a){function n(){}n()}e.module("app.event").controller("EventsPageController",["$scope","$auth","$stateParams","changeBrowserURL","baseUrlService",t])}(window.angular),function(e){"use strict";function t(e){return{restrict:"E",replace:!0,templateUrl:"app/event/views/eventSuggestionListTemplate.html",scope:{eventLimit:"=eventLimit",eventCity:"=eventCity"},link:function(e,t,o){},controller:function(t){var o={page:1,limit:t.eventLimit,city:t.eventCity};e.getEventCollection(o).then(function(e){console.log("events"),console.log(e),t.eventSuggestions=e.data.docs},function(e){console.log("error"),console.log(e)}),t.eventDir={}}}}e.module("app.event").directive("eventSuggestionList",["eventService",t])}(window.angular),function(e){"use strict";function t(){return{restrict:"E",replace:!0,templateUrl:"app/event/views/singleEventTemplate.html",scope:{event:"=singleEvent",isAdminEvent:"@adminEvent"},link:function(e,t,o){},controller:function(e){function t(e){return Object.keys(e).map(function(t,o){if("latitude"!=t&&"longitude"!=t&&"_id"!=t)return console.log(t),e[t]})}e.eventDir={mapAddress:t}}}}function o(){return{restrict:"E",replace:!0,templateUrl:"app/event/views/singleEventVertTemplate.html",scope:{event:"=singleEvent"},link:function(e,t,o){},controller:function(e){function t(e){return Object.keys(e).map(function(t,o){if("latitude"!=t&&"longitude"!=t&&"_id"!=t)return console.log(t),e[t]})}e.eventDir={mapAddress:t}}}}e.module("app.event").directive("singleEventVertDirective",[o]).directive("singleEventDirective",[t])}(window.angular),function(e){"use strict";function t(){return{restrict:"E",replace:!0,templateUrl:"app/event/views/singleEventSuggestionTemplate.html",scope:{suggestedEvent:"=suggestedEvent"},link:function(e,t,o){},controller:function(e){e.eventDir={}}}}e.module("app.event").directive("singleEventSuggestion",[t])}(window.angular),function(e){"use strict";function t(e,t){function o(o){return console.log(o),e.get(t.baseUrl+"event/collection",{params:o})}function r(o,r){return e.get(t.baseUrl+"event/event/"+o,{params:r})}this.getEventCollection=o,this.getSingleEvent=r}e.module("app.event").service("eventService",["$http","baseUrlService",t])}(window.angular),function(e){"use strict";function t(e,t,o,r,a){function n(e){o.showAuthenticationDialog(e)}function i(){t.logout(),a.removeUser(),r.location.reload()}function s(e){o.socialAuthenticate(e)}var l=this;l.authenticate=s,l.authLogout=i,l.showAuthenticationDialog=n,l.isAuth=t.isAuthenticated()}e.module("app.home").controller("AuthController",["$scope","$auth","userAuthService","$window","userData",t])}(window.angular),function(e){"use strict";function t(e,t,o,r,a,n){function i(){n.goBack()}function s(){t.go("tabs.home")}function l(e){r.setCity(e),t.go("entitySearchPage")}function c(){a.getCities().then(function(e){console.log("the city daa",e),u.citySearchItems=e.data},function(e){console.log(e)})}var u=this;c(),o.location?u.citySearchModel=o.location:r.isCityExists()?u.citySearchModel=r.getCity():u.citySearchModel="hyderabad",u.itemSelected=l,u.closeCitySearchPage=s,u.goBackPage=i}e.module("app.home").controller("CitySearchPageController",["$scope","$state","$stateParams","cityStorage","citiesService","$ionicHistory",t])}(window.angular),function(e){"use strict";function t(e,t,o,r,a,n){function i(){a.goBack()}function s(){o.go("tabs.home")}function l(e){var r=e.userSearchString.split("#&#")[1],a=e.userSearchString.split("#&#")[0],n=t.getCity();"store"==r?o.go("tabs.storesCollectionName",{storeName:a,location:g.city}):"store-category"==r?o.go("tabs.storesCollectionCategory",{category:a,location:g.city}):"product"==r?o.go("tabs.storesCollectionCategory",{category:a,location:g.city}):"product-category"==r?o.go("tabs.productsCollectionCategory",{category:a,location:n}):"product-subcategory"==r?o.go("tabs.productsCollectionSubCategory",{subCategory:a,location:n}):r.trim().indexOf("products")!=-1?o.go("tabs.productsCollectionLocation",{location:g.city}):r.trim().indexOf("offers")!=-1?o.go("tabs.offers.offersCollectionLocation",{location:g.city}):o.go("tabs.storesCollectionLocation",{location:g.city})}function c(){g.entitySearchModel?n.getAjaxSearches(g.city,g.entitySearchModel).then(function(e){g.entitySearchItems=[],g.entitySearchItems=e.data}):u()}function u(){n.getSearches(g.city).then(function(e){var t={userSearchString:"All stores#&#stores#&#"+g.city},o={userSearchString:"All products#&#products#&#"+g.city},r={userSearchString:"All offers#&#offers#&#"+g.city};g.entitySearchItems=e.data,g.entitySearchItems.unshift(t,o,r)},function(e){console.log(e)})}function d(){u()}var g=this;d(),g.city=t.getCity(),g.closeCitySearchPage=s,g.goBackPage=i,g.entityTextChange=c,g.itemSelected=l}e.module("app.home").controller("EntitySearchPageController",["$scope","cityStorage","$state","$stateParams","$ionicHistory","searchService",t])}(window.angular),function(e){"use strict";function t(t,o,r,a,n,i,s,l){function c(e){return function(){l(e).toggle().then(function(){console.log("toggle "+e+" is done")})}}function u(){r.changeBrowserURLMethod("/")}function d(e){a.authenticate(e),u()}function g(){a.logout(),u()}function f(o){(i("sm")||i("xs"))&&t.customFullscreen;n.show({controller:"ModalFormLoginController",templateUrl:"app/home/views/modalFormLogin.html",parent:e.element(document.body),targetEvent:o,clickOutsideToClose:!0,fullscreen:p.customFullscreen}).then(function(e){t.status='You said the information was "'+e+'".'},function(){t.status="You cancelled the dialog."}),t.$watch(function(){return i("md")||i("xl")},function(e){p.customFullscreen=e===!0})}var p=this;p.toHomePage=u,p.authenticate=d,p.authLogout=g,p.showAdvanced=f,p.customFullscreen=void 0,p.isAuth=a.isAuthenticated(),p.isOpenLeft=function(){return l("left").isOpen()},p.toggleLeft=c("left")}e.module("app.home").controller("HeaderController",["$scope","userData","changeBrowserURL","$auth","$mdDialog","$mdMedia","$timeout","$mdSidenav",t])}(window.angular),function(e){"use strict";function t(e,t,o,r,a){function n(){l.getCategories()}function i(e){var t=o.getCity(),a=e+"-stores-in-"+t,n="/store/storesCollection/category/"+e+"/"+t+"/"+a;r.changeBrowserURLMethod(n)}function s(){l.categoryList=[],t.getCityCategories(o.getCity()).then(function(e){l.categoryList=e.data,l.innerLoading=!1})}var l=this;l.cateList=[],l.categLoadMore=!1,l.pageNo=0,l.getCategories=s,l.categoryLinkClicked=i,n(),l.innerLoading=!0,e.$on("city-changed",function(){l.getCategories()})}function o(e,t,o,r){}e.module("app.home").controller("HomeController",["$scope","citiesService","searchService","changeBrowserURL",o]).controller("CategoryListController",["$scope","getCityCategoriesService","cityStorage","changeBrowserURL","baseUrlService",t])}(window.angular),function(e){"use strict";function t(e,t,o){console.log("inside the mdSidenav"),this.close=function(){t("left").close().then(function(){o.debug("close RIGHT is done")})}}e.module("app.home").controller("HomeLeftController",["$timeout","$mdSidenav","$log",t])}(window.angular),function(e){"use strict";function t(e,t,o){function r(e){o.showAuthenticationDialog(e)}var a=this;a.authCheck=t.isAuthenticated(),a.showAuthenticationDialog=r}e.module("app.home").controller("MobileFooterController",["$scope","$auth","userAuthService",t])}(window.angular),function(e){"use strict";function t(e,t){function o(){t.go("entitySearchPage")}var r=this;r.openEntitySearchPage=o}e.module("app.home").controller("MobileHomePageController",["$scope","$state",t])}(window.angular),function(e){"use strict";function t(e,t,o,r,a,n,i,s,l){function c(){U.mobileSearchBoxVisible=!0}function u(e){e||(e={});var t=e.userSearchString.split("#&#")[1],o=e.userSearchString.split("#&#")[0],r=U.selectedItem;U.slug=o+"-"+t.split("-")[0]+"s-in-"+r,U.mobileSearchBoxVisible=!1,"store"==t?(U.url="/store/storesCollection/storeName/",l.go("storesCollectionName",{storeName:o,location:r})):"store-category"==t?(U.url="/store/storesCollection/category/",l.go("storesCollectionCategory",{category:o,location:r})):"product"==t?(U.url="/productsCollectionName/",l.go("storesCollectionCategory",{category:o,location:r})):"product-category"==t?(U.url="/productsCollectionCategory/",l.go("productsCollectionCategory",{category:o,location:r})):"product-subcategory"==t?(U.url="/productsCollectionSubCategory/",l.go("productsCollectionSubCategory",{subCategory:o,location:r})):t.trim().indexOf("products")!=-1?h():t.trim().indexOf("offers")!=-1?v():m()}function d(e,t){t.length>=1?n.getAjaxSearches(e,t).then(function(e){U.userSearches=[],U.userSearches=e.data}):U.selectedItem&&g(U.selectedItem)}function g(e){n.getSearches(e).then(function(e){var t={userSearchString:"All stores#&#stores#&#"+U.selectedItem},o={userSearchString:"All products#&#products#&#"+U.selectedItem},r={userSearchString:"All offers#&#offers#&#"+U.selectedItem};U.userSearches=e.data,U.userSearches.unshift(t,o,r)},function(e){console.log(e)})}function f(e){r.setCity(e),g(e)}function p(){U.cities.indexOf(U.selectedItem)!=-1&&(U.userSearchText&&0!==U.userSearchText.length||m())}function m(){U.url="/store/storesCollection/location";var e=U.selectedItem;U.slug="stores-in-"+e,l.go("storesCollectionLocation",{location:e})}function h(){U.url="/productsCollectionLocation";var e=U.selectedItem;U.slug="products-in-"+e,l.go("productsCollectionLocation",{location:e})}function v(){U.url="/offers";var e=U.selectedItem;U.slug="offers-in-"+e,l.go("offersLocation",{location:e})}function w(){a.getCities().then(function(e){U.cities=e.data},function(e){U.cities=e})}var U=this;o.location?U.selectedItem=o.location:r.isCityExists()?U.selectedItem=r.getCity():U.selectedItem="hyderabad",w(),U.userSearches=[],U.selectedItemChange=f,U.userSearchItemChange=u,U.locationSearch=p,U.userSearchTextChange=d,U.openSearchBox=c,U.selectedItemChange(U.selectedItem)}e.module("app.home").controller("SearchBoxController",["$scope","$window","$stateParams","cityStorage","citiesService","searchService","changeBrowserURL","baseUrlService","$state",t])}(window.angular),function(e){"use strict";function t(e,t,o,r){var a=this;a.citySearchModel=r.getCity(),a.openCityPage=function(){t.go("citySearchPage")},a.openEntityPage=function(){t.go("entitySearchPage")},a.goBack=function(){o.goBack()}}e.module("app.home").controller("SearchBoxPageController",["$scope","$state","$ionicHistory","cityStorage",t])}(window.angular),function(e){"use strict";function t(e,t,o){function r(e){o.showAuthenticationDialog(e)}var a=this;a.isAuthenticated=t.isAuthenticated(),a.showAuthenticationDialog=r}e.module("app.home").controller("TabsController",["$scope","$auth","userAuthService",t])}(window.angular),function(e){"use strict";function t(e,t,o){function r(e){o.changeBrowserURLMethod("/admin/adminStorePage/"+e)}function a(){t.getUserPage(t.getUser()._id)}function n(e,t){l=t,e(t)}function i(){o.changeBrowserURLMethod("/admin/createStore/")}function s(){c.user=t.getUser(),c.userProfilePic=t.getUser().picture,c.userStoresList=t.getUser().storeId}var l,c=this;c.openMenu=n,c.getUserPage=a,c.getAdminStore=r,c.createNewStore=i,s()}e.module("app.user").controller("UserActionListController",["$scope","userData","changeBrowserURL",t])}(window.angular),function(e){"use strict";function t(e,t){var o,r=this;t.on("connect",function(){t.emit("addToSingleRoom",{roomId:e.getUser()._id})}),t.on("newMessageReceived",function(t){t.user._id==e.getUser()._id||(r.messageReceived=!0)}),r.openMenu=function(e,t){o=t,e(t),r.messageReceived=!1}}e.module("app.home").controller("UserChatNotificationController",["userData","Socket",t])}(window.angular),function(e){"use strict";function t(e,t,o,r,a,n,i){function s(){i.share({provider:"facebook",attrs:{socialshareUrl:n.currentUrlWQ,socialshareText:"Offline Offers",socialshareVia:"1068203956594250"}})}function l(){a.getSingleOffer(o.offerId).then(function(e){console.log("single offer"),console.log(e),c.offerData=e.data,c.offerData.address.latitude?c.pos=[c.offerData.address.latitude,c.offerData.address.longitude]:c.pos=[17.361625,78.474622]},function(e){console.log(e)}).catch(function(e){console.log("Error: ",e)}).finally(function(){console.log("This finally block")})}var c=this;c.offerData={},l(),c.shareFacebook=s,console.log("sd"+n.currentUrlWQ)}e.module("app.offer").controller("OfferPageController",["$scope","$auth","$stateParams","changeBrowserURL","offerService","baseUrlService","Socialshare",t])}(window.angular),function(e){"use strict";function t(e,t,o){function r(){}var a=this;a.offersList=[],a.paramData={city:o.location,page:1,limit:10},r()}e.module("app.offer").controller("OffersCollectionController",["$scope","$auth","$stateParams",t])}(window.angular),function(e){"use strict";function t(t,o,r,a){function n(){l.paramData.page+=1,l.loadOffers()}function i(){r.getOfferCollection(l.paramData).then(function(t){console.log("params"),console.log(t),l.totalOffers=t.data.total,e.forEach(t.data.docs,function(e){l.offersList.push(e)})}).catch(function(e){console.log("error"),console.log(e)})}function s(){i()}var l=this;l.offersList=[],l.loadOffers=i,l.loadMore=n,l.paramData={nearby:!0,page:1,limit:10,longitude:a.longitude,latitude:a.latitude,distance:6e4},t.$on("distanceChanged",function(e){l.paramData.distance=e,l.loadOffers()}),s()}e.module("app.offer").controller("OffersPageController",["$scope","$stateParams","offerService","positions",t])}(window.angular),function(e){"use strict";function t(e,t,o){function r(){}var a=this;a.changeDistance=function(){console.log(a.distance)},r()}e.module("app.offer").controller("OffersParentController",["$scope","$stateParams","positions",t])}(window.angular),function(e){"use strict";function t(e,t){function o(o){return console.log(o),e.get(t.baseUrl+"offer/collection",{params:o})}function r(o,r){return e.get(t.baseUrl+"offer/offer/"+o,{params:r})}this.getOfferCollection=o,this.getSingleOffer=r}e.module("app.offer").service("offerService",["$http","baseUrlService",t])}(window.angular),function(e){"use strict";function t(){return{restrict:"E",replace:!0,templateUrl:"app/offer/views/offersListTemplate.html",scope:{offersList:"=offersList"}}}e.module("app.offer").directive("offersList",[t])}(window.angular),function(e){"use strict";function t(e){return{restrict:"E",replace:!0,templateUrl:"app/offer/views/offerSuggestionListTemplate.html",scope:{offerLimit:"=offerLimit",offerCity:"=offerCity"},link:function(e,t,o){},controller:["$scope",function(t){var o={page:1,limit:t.offerLimit,city:t.offerCity};e.getOfferCollection(o).then(function(e){console.log("offers"),console.log(e),t.offerSuggestions=e.data.docs},function(e){console.log("error"),console.log(e)}),t.offerDir={}}]}}e.module("app.offer").directive("offerSuggestionList",["offerService",t])}(window.angular),function(e){"use strict";function t(){return{restrict:"E",replace:!0,templateUrl:"app/offer/views/singleOfferTemplate.html",scope:{offer:"=singleOffer",isAdminOffer:"@adminOffer"},link:function(e,t,o){},controller:["$scope",function(e){function t(e){return Object.keys(e).map(function(t,o){if("latitude"!=t&&"longitude"!=t&&"_id"!=t)return console.log(t),e[t]})}e.offerDir={mapAddress:t}}]}}function o(){return{restrict:"E",replace:!0,templateUrl:"app/offer/views/singleOfferVertTemplate.html",scope:{offer:"=singleOffer"},link:function(e,t,o){},controller:["$scope",function(e){function t(e){return Object.keys(e).map(function(t,o){if("latitude"!=t&&"longitude"!=t&&"_id"!=t)return console.log(t),e[t]})}e.offerDir={mapAddress:t}}]}}e.module("app.offer").directive("singleOfferVertDirective",[o]).directive("singleOfferDirective",[t])}(window.angular),function(e){"use strict";function t(){return{restrict:"E",replace:!0,templateUrl:"app/offer/views/singleOfferSuggestionTemplate.html",scope:{suggestedOffer:"=suggestedOffer"},link:function(e,t,o){},controller:["$scope",function(e){e.offerDir={}}]}}e.module("app.offer").directive("singleOfferSuggestion",[t])}(window.angular),function(e){"use strict";function t(t,o,r,a,n){function i(t){n.show({controller:"FilterModalController",templateUrl:"app/store/views/filterModalTemplate.html",parent:e.element(document.body),targetEvent:t,clickOutsideToClose:!0,fullscreen:!0,locals:{filtersList:[{filterName:s.areaFilterName,filterNames:s.areas,filterModel:s.areaRadioModel}]}}).then(function(e){console.log(e)},function(){})}var s=this;s.location=r.location,s.productsSearchHeader=r.slug,s.areaRadioModel={},s.areaFilterName="area",s.showFilterDialog=i,s.paramData={city:s.location,page:1,limit:10,fields:"-store",category:r.category},a.setParamData(s.paramData),t.$on("filterClicked",function(){s.paramData=a.getParamData()}),o.getCityAreas(s.location).then(function(e){s.areas=e.data},function(e){console.log(e)})}e.module("app.product").controller("ProductCategoryCollectionController",["$scope","getCityProductAreasService","$stateParams","paramFactory","$mdDialog",t])}(window.angular),function(e){"use strict";function t(e,t,o,r,a,n,i){function s(e,t){var o="product/singleProduct/"+e._id;t&&a.changeBrowserURLMethod(o,t),a.changeBrowserURLMethod(o)}function l(){u.loading=!0,u.pageNo=u.pageNo+1;var e=r.location,t="";if(o.absUrl().indexOf("/productsCollectionCategory/")!=-1){var a=r.category;t="product/products/category/"+a+"/"+e+"/"+u.pageNo}else if(o.absUrl().indexOf("/productsCollectionSubCategory/")!=-1){var n=r.subCategory;t="product/products/subCategory/"+n+"/"+e+"/"+u.pageNo}else if(o.absUrl().indexOf("/productsCollectionName/")!=-1){var s=r.productName;t="product/products/name/"+s+"/"+e+"/"+u.pageNo}else o.absUrl().indexOf("/productsCollectionLocation/")!=-1&&(t="product/products/location/"+e+"/"+u.pageNo);i.getProductCollection(t,u.paramData).then(function(e){if(0===e.data.docs.length?u.noProductsToShow=!0:u.noProductsToShow=!1,u.totalProducts=e.data.total,0===u.productsList.length){for(var t=[],o=e.data.docs.length-1;o>=0;o--)t.push(e.data.docs[o]);
u.productsList=t}else{u.paramData&&1==u.pageNo&&(u.productsList=[]);for(var r=e.data.docs.length-1;r>=0;r--)u.productsList.push(e.data.docs[r])}u.loading=!1},function(e){console.log(e)})}function c(){u.getProductsCollection()}var u=this;u.pageNo=0,u.productsList=[],u.getSingleProduct=s,u.getProductsCollection=l,u.productsSearchHeader=r.slug,console.log("inside product"),c(),e.$on("parent",function(e,t){u.pageNo=0,u.paramData=t,u.getProductsCollection()})}e.module("app.product").controller("ProductListController",["$scope","$auth","$location","$stateParams","changeBrowserURL","baseUrlService","getProductCollectionService",t])}(window.angular),function(e){"use strict";function t(t,o,r,a,n){function i(t){n.show({controller:"FilterModalController",templateUrl:"app/store/views/filterModalTemplate.html",parent:e.element(document.body),targetEvent:t,clickOutsideToClose:!0,fullscreen:!0,locals:{filtersList:[{filterName:s.areaFilterName,filterNames:s.areas,filterModel:s.areaRadioModel}]}}).then(function(e){console.log(e)},function(){})}var s=this;s.location=r.location,s.productsSearchHeader=r.slug,s.categoryRadioModel={},s.areaRadioModel={},s.areaFilterName="area",s.showFilterDialog=i,s.paramData={city:s.location,page:1,limit:10,fields:"-store",name:r.productName},a.setParamData(s.paramData),t.$on("filterClicked",function(){s.paramData=a.getParamData()}),o.getCityAreas(s.location).then(function(e){s.areas=e.data},function(e){console.log(e)})}e.module("app.product").controller("ProductNameCollectionController",["$scope","getCityProductAreasService","$stateParams","paramFactory","$mdDialog",t])}(window.angular),function(e){"use strict";function t(t,o,r,a,n,i){function s(t){i.show({controller:"FilterModalController",templateUrl:"app/store/views/filterModalTemplate.html",parent:e.element(document.body),targetEvent:t,clickOutsideToClose:!0,fullscreen:!0,locals:{filtersList:[{filterName:l.areaFilterName,filterNames:l.areas,filterModel:l.areaRadioModel},{filterName:l.categoryFilterName,filterNames:l.categories,filterModel:l.categoryRadioModel}]}}).then(function(e){console.log(e)},function(){})}var l=this;l.location=o.location,l.productsSearchHeader=o.slug,l.categoryRadioModel={},l.areaRadioModel={},l.areaFilterName="area",l.categoryFilterName="category",l.showFilterDialog=s,l.paramData={city:l.location,page:1,limit:10,fields:"-store"},n.setParamData(l.paramData),t.$on("filterClicked",function(){l.paramData=n.getParamData()}),r.getCityAreas(l.location).then(function(e){l.areas=e.data},function(e){console.log(e)}),a.getCityCategories(l.location).then(function(e){l.categories=e.data},function(e){console.log(e)})}e.module("app.product").controller("ProductsLocationController",["$scope","$stateParams","getCityProductAreasService","getCityProductCategoriesService","paramFactory","$mdDialog",t])}(window.angular),function(e){"use strict";function t(){}e.module("app.product").controller("ProductSubCategoryCollectionController",[t])}(window.angular),function(e){"use strict";function t(e,t,o,r){function a(){o.getSingleProduct(r.productId).then(function(e){n.product=e.data,o.getSingleProductStores({limit:10,page:1,name:n.product.name,fields:"store",populate:"store"}).then(function(e){console.log("the list of list"),console.log(e),n.productStoreList=e.data.docs.map(function(e){return e.store})})})}var n=this;n.authCheck=t.isAuthenticated(),a(),n.tab=1,n.setTab=function(e){n.tab=e},n.isSet=function(e){return n.tab===e}}e.module("app.product").controller("SingleProductController",["$scope","$auth","getProductsService","$stateParams",t])}(window.angular),function(e){"use strict";function t(e,t){var o=this;o.paramData={page:1,limit:10,fields:"-store",store:t.storeId}}e.module("app.product").controller("StoreProductListController",["$scope","$stateParams",t])}(window.angular),function(e){"use strict";function t(t,o){return{restrict:"E",replace:!0,templateUrl:"app/product/views/productListTemplate.html",scope:{paramData:"=paramData",adminProduct:"@adminProduct"},controller:["$scope",function(r){function a(){r.paramData.page=r.paramData.page+1,o.setParamData(r.paramData),n()}function n(){r.loading=!0,t.productsCollection(r.paramData).then(function(t){0===t.data.docs.length?r.noProductsToShow=!0:r.noProductsToShow=!1,r.totalProducts=t.data.total,e.forEach(t.data.docs,function(e){r.productsList.push(e)}),r.loading=!1}).catch(function(e){console.log("error"),console.log(e)})}function i(){n()}r.productsList=[],r.loadMoreProducts=a,r.getProducts=n,r.paramData=o.getParamData(),i(),r.$on("filterClicked",function(){r.productsList=[],r.paramData=o.getParamData(),n()})}]}}e.module("app.product").directive("productsList",["getProductCollectionService","paramFactory",t])}(window.angular),function(e){"use strict";function t(t){return{restrict:"E",replace:!0,templateUrl:"app/product/views/singleProductTemplate.html",scope:{product:"=singleProduct",adminProduct:"@adminProduct"},link:function(e,t,o){},controller:["$scope",function(o){function r(o,r){t.show({controller:"EditProductController",templateUrl:"app/admin/views/adminEditProduct.html",parent:e.element(document.body),targetEvent:r,controllerAs:"csc",clickOutsideToClose:!0,fullscreen:!0,locals:{product:o}}).then(function(e){console.log(e)},function(){})}o.showProductEditModal=r}]}}e.module("app.product").directive("singleProductDirective",["$mdDialog",t])}(window.angular),function(e){"use strict";function t(e,t){function o(o,r){return console.log(r),e.get(t.baseUrl+o,{params:r})}function r(o){return console.log(o),e.get(t.baseUrl+"product/collection",{params:o})}function a(){return e.get(t.baseUrl+"product/products/name/:name/:location/:pageNo",{params:paramData})}this.getProductCollection=o,this.getProductNameCollection=a,this.productsCollection=r}e.module("app.product").service("getProductCollectionService",["$http","baseUrlService",t])}(window.angular),function(e){"use strict";function t(e,t,o,r){function a(t){var r=1;return e.get(o.baseUrl+"product/products/store/"+t+"/"+r)}function n(t){return e.get(o.baseUrl+"product/products/singleProduct/"+t)}function i(t){return e.get(o.baseUrl+"product/collection",{params:t})}function s(e,t){var o="product/singleProduct/"+e._id+"/"+(e.myslug||" ");t&&r.changeBrowserURLMethod(o,t),r.changeBrowserURLMethod(o)}this.getStoreProductsList=a,this.getSingleProduct=n,this.getSingleProductPage=s,this.getSingleProductStores=i}e.module("app.product").service("getProductsService",["$http","storeData","baseUrlService","changeBrowserURL",t])}(window.angular),function(e){"use strict";function t(e,t,o,r,a,n,i){function s(){f.getProductReviews()}function l(){n.getProductReviews().then(function(e){f.reviewList=e.data},function(e){})}function c(e){for(var t=parseInt(e.rating),o=[],r=0;r<t;r++)o.push(r);return o}function u(e){for(var t=e.upvotes,o=0;o<t.length;o++)if(f.userUpvotes.indexOf(t[o])!=-1)return f.currentUpvoteId=t[o],!0}function d(e){f.smallLoadingModel[e._id]=!0,n.submitUserReviewUpvote({reviewId:e._id,productId:o.productId,userId:i.getUser()._id}).then(function(t){e.upvotes.push(t.data.id),f.userUpvotes.push(t.data.id),i.setUser(),f.smallLoadingModel[e._id]=!1})}function g(e){f.smallLoadingModel[e._id]=!0,n.deleteUserReviewUpvote({reviewId:e._id,productId:o.productId,userId:i.getUser()._id}).then(function(t){e.upvotes.splice(e.upvotes.indexOf(t.data.id),1),i.setUser(),f.smallLoadingModel[e._id]=!1})}var f=this;f.activate=s,f.smallLoadingModel={},f.getProductReviews=l,f.getRating=c,f.userReviewUpvoted=u,f.authCheck=t.isAuthenticated(),f.submitUserReviewUpvote=d,f.deleteUserReviewUpvote=g,f.getUserPage=i.getUserPage,f.reviewParams={},f.reviewParams.getRating=c,f.reviewParams.userReviewUpvoted=u,f.reviewParams.submitUserReviewUpvote=d,f.reviewParams.deleteUserReviewUpvote=g,f.reviewParams.smallLoadingModel=f.smallLoadingModel,f.reviewParams.getRating=c,f.authCheck&&(f.userUpvotes=i.getUser().upvotes),f.submitUserReviewUpvote=d,f.activate()}e.module("app.review").controller("ProductReviewListController",["$scope","$auth","$stateParams","$state","changeBrowserURL","reviewService","userData",t])}(window.angular),function(e){"use strict";function t(e,t,o,r,a){function n(e){var t=6-e.currentTarget.attributes.value.nodeValue;s.review.rating=t}function i(){t.storeId?a.submitStoreReview(s.review).then(function(e){r.setUser(),o.reload()},function(e){}):t.productId&&a.submitProductReview(s.review).then(function(e){r.setUser(),o.reload()},function(e){})}var s=this;s.review={},s.user={},t.storeId?s.review.storeId=t.storeId:t.productId&&(s.review.productId=t.productId),s.ratingClick=n,r.getUser()?(s.review.userId=r.getUser()._id,s.user.picture=r.getUser().picture,s.user.displayName=r.getUser().displayName):s.review.userId=e.getPayload().sub,s.submitReview=i}e.module("app.review").controller("ReviewSubmitController",["$auth","$stateParams","$state","userData","reviewService",t])}(window.angular),function(e){"use strict";function t(e,t,o,r,a,n){function i(){g.getStoreReviews()}function s(){a.getStoreReviews().then(function(e){g.reviewList=e.data},function(e){})}function l(e){for(var t=parseInt(e.rating),o=[],r=0;r<t;r++)o.push(r);return o}function c(e){for(var t=e.upvotes,o=0;o<t.length;o++)if(g.userUpvotes.indexOf(t[o])!=-1)return g.currentUpvoteId=t[o],!0}function u(e){g.smallLoadingModel[e._id]=!0,a.submitUserReviewUpvote({reviewId:e._id,storeId:o.storeId,userId:n.getUser()._id}).then(function(t){e.upvotes.push(t.data.id),g.userUpvotes.push(t.data.id),n.setUser(),g.smallLoadingModel[e._id]=!1})}function d(e){g.smallLoadingModel[e._id]=!0,a.deleteUserReviewUpvote({reviewId:e._id,storeId:o.storeId,userId:n.getUser()._id}).then(function(t){e.upvotes.splice(e.upvotes.indexOf(t.data.id),1),n.setUser(),g.smallLoadingModel[e._id]=!1})}var g=this;g.activate=i,g.smallLoadingModel={},g.getStoreReviews=s,g.getRating=l,g.userReviewUpvoted=c,g.authCheck=t.isAuthenticated(),g.submitUserReviewUpvote=u,g.deleteUserReviewUpvote=d,g.getUserPage=n.getUserPage,g.reviewParams={},g.reviewParams.getRating=l,g.reviewParams.userReviewUpvoted=c,g.reviewParams.submitUserReviewUpvote=u,g.reviewParams.deleteUserReviewUpvote=d,g.reviewParams.smallLoadingModel=g.smallLoadingModel,g.reviewParams.getRating=l,g.authCheck&&(g.userUpvotes=n.getUser().upvotes),g.activate()}e.module("app.review").controller("StoreReviewListController",["$scope","$auth","$stateParams","$state","reviewService","userData",t])}(window.angular),function(e){"use strict";function t(e,t,o,r,a,n){function i(){g.getUserReviews()}function s(){o.getUserReviews().then(function(e){g.reviewList=e.data},function(e){})}function l(e){for(var t=parseInt(e.rating),o=[],r=0;r<t;r++)o.push(r);return o}function c(e){for(var t=e.upvotes,o=0;o<t.length;o++)if(g.userUpvotes.indexOf(t[o])!=-1)return g.currentUpvoteId=t[o],!0}function u(e){g.smallLoadingModel[e._id]=!0,o.submitUserReviewUpvote({reviewId:e._id,userId:r.getUser()._id}).then(function(t){e.upvotes.push(t.data.id),g.userUpvotes.push(t.data.id),r.setUser(),g.smallLoadingModel[e._id]=!1})}function d(e){g.smallLoadingModel[e._id]=!0,o.deleteUserReviewUpvote({reviewId:e._id,userId:r.getUser()._id}).then(function(t){e.upvotes.splice(e.upvotes.indexOf(t.data.id),1),r.setUser(),g.smallLoadingModel[e._id]=!1})}var g=this;g.activate=i,g.smallLoadingModel={},g.getUserReviews=s,g.getRating=l,g.userReviewUpvoted=c,g.authCheck=t.isAuthenticated(),g.submitUserReviewUpvote=u,g.deleteUserReviewUpvote=d,g.getUserPage=r.getUserPage,g.getSingleStorePage=a.getSingleStorePage,g.getSingleProductPage=n.getSingleProductPage,g.reviewParams={},g.reviewParams.getRating=l,g.reviewParams.userReviewUpvoted=c,g.reviewParams.submitUserReviewUpvote=u,g.reviewParams.deleteUserReviewUpvote=d,g.reviewParams.smallLoadingModel=g.smallLoadingModel,g.reviewParams.getRating=l,g.authCheck&&(g.userUpvotes=r.getUser().upvotes),g.submitUserReviewUpvote=u,g.activate()}e.module("app.review").controller("UserReviewListController",["$scope","$auth","reviewService","userData","getSingleStore","getProductsService",t])}(window.angular),function(e){"use strict";function t(e){return{replace:!0,scope:{reviewParams:"=reviewParams",review:"=review"},templateUrl:"app/reviews/views/singleReviewTemplate.html",link:function(t){t.authCheck=e.isAuthenticated()}}}e.module("app.review").directive("singleReviewDirective",["$auth",t])}(window.angular),function(e){"use strict";function t(e,t,o){function r(t){return e.post(o.baseUrl+"review/reviews/store/"+t.storeId,t)}function a(){var r=t.storeId;return e.get(o.baseUrl+"review/reviews/store/"+r)}function n(t){return e.post(o.baseUrl+"review/reviews/product/"+t.productId,t)}function i(){var r=t.productId;return e.get(o.baseUrl+"review/reviews/product/"+r)}function s(t){return console.log(t),e.post(o.baseUrl+"upvote/upvotes/review/",t)}function l(t){return e.delete(o.baseUrl+"upvote/upvotes/review/",{params:t})}function c(){var r=t.userId;return e.get(o.baseUrl+"user/userReviews/"+r)}var u=this;u.submitStoreReview=r,u.getStoreReviews=a,u.submitUserReviewUpvote=s,u.deleteUserReviewUpvote=l,u.getProductReviews=i,u.submitProductReview=n,u.getUserReviews=c}e.module("app.review").service("reviewService",["$http","$stateParams","baseUrlService",t])}(window.angular),function(e){"use strict";function t(e,t,o,r,a){function n(){i()}function i(){var e={location:l.currentCity,page:1,limit:10,sort:"-count"};a.categoryCollection(e).then(function(e){l.categoryBoxList=e.data.docs.map(function(e){var t={};return t.category=e,t.storesList=[],s(t),t})})}function s(e){var t={};t.location=l.currentCity,t.category=e.category,t.page=1,t.limit=6,a.storesCollection(t).then(function(t){e.storesList=t.data.docs})}var l=this;l.isAuth=r.isAuthenticated(),l.storeCategoryCollection=s,n(),l.categoryBoxList=[],l.currentCity=o.getCity()||"hyderabad"}e.module("app.home").controller("CategoryBoxListController",["$scope","changeBrowserURL","cityStorage","$auth","getStoreCollectionService",t])}(window.angular),function(e){"use strict";function t(e,t,o){function r(){t.cancel()}e.cancelDialog=r,e.filtersList=o,console.log("yoyooyy"),console.log(e.filtersList)}e.module("app.store").controller("FilterModalController",["$scope","$mdDialog","filtersList",t])}(window.angular),function(e){"use strict";function t(t,o,r,a,n,i,s,l,c,u){function d(){return Object.keys(f.storeData.address).map(function(e){return f.storeData.address[e]}).join(" ")}function g(t){l.show({controller:"UserStoreReportController",controllerAs:"usr",templateUrl:"app/store/views/userStoreReportTemplate.html",parent:e.element(document.body),targetEvent:t,clickOutsideToClose:!0,fullscreen:!0}).then(function(e){},function(){})}c.getMap().then(function(e){});var f=this;f.tab=1,f.setTab=function(e){f.tab=e},f.isSet=function(e){return f.tab===e},f.storeData={},f.loading=!0,f.authCheck=o.isAuthenticated(),f.authCheck&&(f.currentUserId=a.getUser()._id),f.getAddressString=d,f.showStoreReportDialog=g,f.storeImagesObj=[],t.showAlert=function(t){l.show(l.alert().parent(e.element(document.querySelector("#popupContainer"))).clickOutsideToClose(!0).title("Claim Business").textContent("If you are the owner of this store,then mail to us at shoppinsmail@gmail.com").ariaLabel("Alert Dialog Demo").ok("Got it!").targetEvent(t))},s.getStore(n.storeId).then(function(e){i.setStore(e.data),f.storeData=e.data,f.addressMap=f.storeData.address.area,f.storeData.address.latitude?f.pos=[f.storeData.address.latitude,f.storeData.address.longitude]:f.pos=[17.361625,78.474622];for(var t=0;t<f.storeData.storeImages.length;t++){var o={};o.src=f.storeData.storeImages[t],f.storeImagesObj.push(o)}f.loading=!1,u.getStoreCollection("store/storesCollection/stores/"+f.storeData.address.city+"/1",{limit:9}).then(function(e){f.storeSuggestions=e.data.docs})}),s.getStoreRating(n.storeId).then(function(e){f.storeData.storeRatingAvg=e.data})}e.module("app.store").controller("SingleStoreController",["$scope","$auth","$location","userData","$stateParams","storeData","getSingleStore","$mdDialog","NgMap","getStoreCollectionService",t])}(window.angular),function(e){"use strict";function t(t,o,r,a,n,i){function s(t){i.show({controller:"FilterModalController",templateUrl:"app/store/views/filterModalTemplate.html",parent:e.element(document.body),targetEvent:t,clickOutsideToClose:!0,fullscreen:!0,locals:{filtersList:[{filterName:l.areaFilterName,filterNames:l.areas,filterModel:l.areaRadioModel}]}}).then(function(e){console.log(e)},function(){})}var l=this;l.location=o.location,l.storesSearchHeader=o.slug,l.areaRadioModel={},l.areaFilterName="area",l.showFilterDialog=s,l.paramData={city:l.location,page:1,limit:10,category:o.category},n.setParamData(l.paramData),t.$on("filterClicked",function(){l.paramData=n.getParamData()}),r.getCityAreas(l.location).then(function(e){l.areas=e.data},function(e){console.log(e)}),a.getCityCategories(l.location).then(function(e){l.categories=e.data},function(e){console.log(e)})}e.module("app.store").controller("StoreCategoryCollectionController",["$scope","$stateParams","getCityAreasService","getCityCategoriesService","paramFactory","$mdDialog",t])}(window.angular),function(e){"use strict";function t(e,t,o,r,a,n){function i(e,t){var r="store/singleStore/"+e._id+"/"+e.myslug;t&&o.changeBrowserURLMethod(r,t),o.changeBrowserURLMethod(r)}function s(){c.loading=!0,c.pageNo=c.pageNo+1;var e=t.location,o="";if(r.absUrl().indexOf("/category/")!=-1){var a=t.category;o="store/storesCollection/category/"+a+"/"+e+"/"+c.pageNo}else if(r.absUrl().indexOf("/storeName/")!=-1){var i=t.storeName;o="store/storesCollection/storeName/"+i+"/"+e+"/"+c.pageNo}else o="store/storesCollection/stores/"+e+"/"+c.pageNo;n.getStoreCollection(o,c.paramData).then(function(e){if(c.totalStores=e.data.total,console.log(e),0===c.storesList.length){for(var t=[],o=e.data.docs.length-1;o>=0;o--)t.push(e.data.docs[o]);c.storesList=t}else{c.paramData&&1==c.pageNo&&(c.storesList=[]);for(var r=e.data.docs.length-1;r>=0;r--)c.storesList.push(e.data.docs[r])}c.loading=!1},function(e){console.log(e)})}function l(){c.getStoresCollection()}var c=this;c.pageNo=0,c.storesList=[],c.getSingleStore=i,c.getStoresCollection=s,c.storesSearchHeader=t.slug,l(),e.$on("parent",function(e,t){c.pageNo=0,c.paramData=t,c.getStoresCollection()})}e.module("app.store").controller("StoreListController",["$scope","$stateParams","changeBrowserURL","$location","baseUrlService","getStoreCollectionService",t])}(window.angular),function(e){"use strict";function t(t,o,r,a,n,i,s){function l(t){s.show({controller:"FilterModalController",templateUrl:"app/store/views/filterModalTemplate.html",parent:e.element(document.body),targetEvent:t,clickOutsideToClose:!0,fullscreen:!0,locals:{filtersList:[{filterName:u.areaFilterName,filterNames:u.areas,filterModel:u.areaRadioModel},{filterName:u.categoryFilterName,filterNames:u.categories,filterModel:u.categoryRadioModel}]}}).then(function(e){console.log(e)},function(){})}function c(){a.getCityAreas(u.location).then(function(e){u.areas=e.data},function(e){console.log(e)}),n.getCityCategories(u.location).then(function(e){u.categories=e.data},function(e){console.log(e)})}var u=this;u.location=r.location,u.categoryRadioModel={},u.categoryFilterName="category",u.storesSearchHeader=r.slug,u.showFilterDialog=l,u.areaRadioModel={},u.areaFilterName="area",u.paramData={city:u.location,page:1,limit:5},i.setParamData(u.paramData),t.$on("filterClicked",function(){u.paramData=i.getParamData()}),c()}e.module("app.store").controller("StoreLocationCollectionController",["$scope","$state","$stateParams","getCityAreasService","getCityCategoriesService","paramFactory","$mdDialog",t])}(window.angular),function(e){"use strict";function t(t,o,r,a,n){function i(t){n.show({controller:"FilterModalController",templateUrl:"app/store/views/filterModalTemplate.html",parent:e.element(document.body),targetEvent:t,clickOutsideToClose:!0,fullscreen:!0,locals:{filtersList:[{filterName:s.areaFilterName,filterNames:s.areas,filterModel:s.areaRadioModel}]}}).then(function(e){console.log(e)},function(){})}var s=this;s.location=o.location,s.storesSearchHeader=o.slug,s.areaRadioModel={},s.showFilterDialog=i,s.areaFilterName="area",s.paramData={city:s.location,page:1,limit:10,name:o.storeName},a.setParamData(s.paramData),t.$on("filterClicked",function(){s.paramData=a.getParamData()}),r.getCityAreas(s.location).then(function(e){s.areas=e.data},function(e){console.log(e)})}e.module("app.store").controller("StoreNameCollectionController",["$scope","$stateParams","getCityAreasService","paramFactory","$mdDialog",t])}(window.angular),function(e){"use strict";function t(e,t,o,r,a){function n(){a.submitFollow(l.follow).then(function(e){l.userStoreFollowed=!0,r.setUser()},function(e){console.log(e)})}function i(){a.deleteFollow(l.follow).then(function(e){l.userStoreFollowed=!1,r.setUser(),console.log(e)},function(e){console.log(e)})}function s(){l.follow.userId=r.getUser()._id,o.storeId?(l.entity=o.storeId,l.follow.storeId=o.storeId):o.productId&&(l.entity=o.productId,l.follow.productId=o.productId,l.getFollowParamObj.productId=o.productId),t.isAuthenticated()&&r.getUser().storeFollowing.indexOf(o.storeId)!=-1&&(l.userStoreFollowed=!0)}var l=this;l.follow={},l.followCheck=!1,l.getFollowParamObj={},l.submitFollow=n,l.deleteFollow=i,l.getFollowParamObj.userId=r.getUser()._id,l.userStoreFollowed=!1,s()}e.module("app.store").controller("UserStoreFollowController",["$scope","$auth","$stateParams","userData","userFollowService",t])}(window.angular),function(e){"use strict";function t(e,t,o,r,a,n){function i(){n.hide()}function s(){n.cancel()}function l(){console.log(u.report),u.innerLoading=!0,a.submitStoreReport(u.report).then(function(e){u.innerLoading=!1,u.showReportForm=!1},function(e){console.log(e)})}function c(){console.log("the auth"),console.log(t.getPayload().sub)}var u=this;u.report={},u.getReportParamObj={},u.showReportForm=!0,u.submitUserReport=l,u.getReportParamObj.userId=r.getUser()._id,u.report.userId=r.getUser()._id,u.report.storeId=o.storeId,u.hideReportDialog=i,u.reportDialogCancel=s,e.answer=function(e){n.hide(e)},c()}e.module("app.store").controller("UserStoreReportController",["$scope","$auth","$stateParams","userData","userService","$mdDialog",t])}(window.angular),function(e){"use strict";function t(e,t,o,r,a,n){function i(){a.submitUpvote(c.upvote).then(function(e){c.userStoreUpvoted=!0,r.setUser()},function(e){console.log(e)})}function s(){a.deleteUpvote(c.upvoteId).then(function(e){c.userStoreUpvoted=!1,r.setUser()},function(e){console.log(e)})}function l(){if(c.upvote.userId=r.getUser()._id,o.storeId?(c.upvote.storeId=o.storeId,c.upvote.type="store"):o.productId&&(c.upvote.type="product",c.upvote.productId=o.productId),t.isAuthenticated())for(var e=n.getStore(),a=r.getUser(),i=0;i<e.upvotes.length;i++)for(var s=0;s<a.upvotes.length;s++)e.upvotes[i]==a.upvotes[s]&&(c.userStoreUpvoted=!0,c.upvoteId=e.upvotes[i],console.log(c.upvoteId))}var c=this;c.upvote={},c.upvoteCheck=!1,c.getUpvoteParamObj={},c.submitUpvote=i,c.deleteUpvote=s,c.getUpvoteParamObj.userId=r.getUser()._id,c.userStoreUpvoted=!1,l()}e.module("app.store").controller("UserStoreUpvoteController",["$scope","$auth","$stateParams","userData","userUpvoteService","storeData",t])}(window.angular),function(e){"use strict";function t(e,t,o,r,a){function n(){a.submitVisit(l.visit).then(function(e){r.setUser(),l.userStoreVisited=!0},function(e){console.log(e)})}function i(){a.deleteVisit(l.visit).then(function(e){r.setUser(),l.userStoreVisited=!1},function(e){console.log(e)})}function s(){l.visit.userId=r.getUser()._id,o.storeId?(l.entity=o.storeId,l.visit.storeId=o.storeId,l.getVisitParamObj.storeId=o.storeId):o.productId&&(l.entity=o.productId,l.visit.productId=o.productId,l.getVisitParamObj.productId=o.productId),t.isAuthenticated()&&a.getVisit(l.visit).then(function(e){e.data[0]&&e.data[0]._id&&(l.userStoreVisited=!0)},function(e){console.log(e)})}var l=this;l.visit={},l.visitCheck=!1,l.getVisitParamObj={},l.submitVisit=n,l.deleteVisit=i,l.getVisitParamObj.userId=r.getUser()._id,l.userStoreVisited=!1,s()}e.module("app.store").controller("UserStoreVisitController",["$scope","$auth","$stateParams","userData","userVisitService",t])}(window.angular),function(e){"use strict";function t(e,t){return{restrict:"E",templateUrl:"app/store/views/filterDirectiveTemplate.html",scope:{filterName:"@filterName",radioRepeat:"=radioRepeat",radioModel:"=radioModel"},controller:["$scope",function(o){o.filterLimit=5,o.paramData=t.getParamData(),o.clearClick=function(){delete o.radioModel[o.filterName],delete o.paramData[o.filterName],o.paramData.page=1,t.setParamData(o.paramData),e.$broadcast("filterClicked")},o.radioChange=function(){o.paramData[o.filterName]=o.radioModel[o.filterName],o.paramData.page=1,t.setParamData(o.paramData),console.log("filter started"),e.$broadcast("filterClicked")},o.loadMoreFilters=function(){o.filterLimit+=5}}]}}function o(){return{restrict:"A",link:function(e,t,o){$(t).on("click",function(){$(this).addClass(o.addClass)})}}}function r(){return{restrict:"A",link:function(e,t,o){$(t).on("click",function(){$(this).siblings().removeClass(o.siblingRemoveClass)})}}}function a(){return{restrict:"A",link:function(e,t,o){$(t).on("click",function(){$(this).siblings(".filterDirectiveRadioGroup").find(".filterRadioButton").removeClass(o.removeClass)})}}}e.module("app.store").directive("filterDirective",["$rootScope","paramFactory",t]).directive("addClass",[o]).directive("removeClass",[a]).directive("siblingRemoveClass",[r])}(window.angular),function(e){"use strict";function t(e){return{restrict:"A",link:function(t,o,r){console.log(o),console.log($(o).attr("src")),console.log(r.imageReplace),e(function(){$(o).attr("src",r.imageReplace)},1e3)}}}e.module("app.store").directive("imageReplace",["$timeout",t])}(window.angular),function(e){"use strict";function t(e){return{restrict:"A",link:function(t,o,r){$(o).on("click",function(){e.scrollToId(r.scrollToId)})}}}e.module("app.store").directive("scrollToId",["scrollToIdService",t])}(window.angular),function(e){"use strict";function t(){return{restrict:"E",replace:!0,templateUrl:"app/store/views/singleStoreTemplate.html",scope:{store:"=store"},controller:["$scope",function(e){function t(){}e.getSingleStore=t}]}}e.module("app.store").directive("singleStore",[t])}(window.angular),function(e){"use strict";function t(){return{restrict:"E",replace:!0,templateUrl:"app/store/views/singleStoreSuggestion.html",scope:{suggestedStore:"=suggestedStore"}}}e.module("app.store").directive("singleStoreSuggestion",[t])}(window.angular),function(e){"use strict";function t(t,o,r){return{restrict:"E",templateUrl:"app/store/views/storesListTemplate.html",scope:{paramData:"=paramData"},controller:["$scope",function(t){function a(){t.paramData.page=t.paramData.page+1,r.setParamData(t.paramData),n()}function n(){t.spinnerLoading=!0,o.storesCollection(t.paramData).then(function(o){t.totalStores=o.data.total,e.forEach(o.data.docs,function(e){t.storesList.push(e)}),t.spinnerLoading=!1}).catch(function(e){console.log(e)})}function i(){n()}t.storesList=[],t.paramData=r.getParamData(),t.loadMoreStores=a,t.getStores=n,i(),t.doRefresh=function(){t.storesList=[],n(),t.$broadcast("scroll.refreshComplete")},t.$on("filterClicked",function(){t.storesList=[],t.paramData=r.getParamData(),console.log("filter clicked"),console.log(t.paramData),n()})}]}}e.module("app.store").directive("storesList",["$rootScope","getStoreCollectionService","paramFactory",t])}(window.angular),function(e){"use strict";function t(){var e={};return e.paramData={},e.getParamData=function(){return e.paramData},e.setParamData=function(t){for(var o in t)e.paramData[o]=t[o]},e}e.module("app.store").factory("paramFactory",[t])}(window.angular),function(e){"use strict";function t(e,t,o){function r(t,r){return e.get(o.baseUrl+t,{params:r})}function a(t){return e.get(o.baseUrl+"store/collection",{params:t})}function n(t){return e.get(o.baseUrl+"store/userSearch/storeCategories",{params:t})}this.getStoreCollection=r,this.storesCollection=a,this.categoryCollection=n}e.module("app.store").service("getStoreCollectionService",["$http","storeData","baseUrlService",t])}(window.angular),function(e){"use strict";function t(e,t,o,r){function a(t){var r={page:"1",limit:"10",obj:{x:"y"}};return e.get(o.baseUrl+"search/collections",{params:r}).then(function(e){console.log("testing basis"),console.log(e)}),e.get(o.baseUrl+"store/singleStore/"+t)}function n(t){return e.get(o.baseUrl+"review/ratings/store/"+t)}function i(e,t){var o="store/singleStore/"+e._id+"/"+(e.myslug||" ");t&&r.changeBrowserURLMethod(o,t),r.changeBrowserURLMethod(o)}this.getStore=a,this.getStoreRating=n,this.getSingleStorePage=i}e.module("app.store").service("getSingleStore",["$http","storeData","baseUrlService","changeBrowserURL",t])}(window.angular),function(e){"use strict";function t(){function e(e){var t=$("body");console.log("Inside the service of scroll");var o=$("#"+e);console.log(o),t.animate({scrollTop:o.offset().top})}this.scrollToId=e}e.module("app.store").service("scrollToIdService",[t])}(window.angular),function(e){"use strict";function t(e){var t=e.localStorage,o={setStore:function(e){t.setItem("store",JSON.stringify(e))},getStore:function(){return JSON.parse(t.getItem("store"))},removeStore:function(){t.removeItem("store")}};return o}e.module("app.store").factory("storeData",["$window",t])}(window.angular),function(e){"use strict";function t(e,t){function o(o){return e.get(t.baseUrl+"follow/followed",{params:o})}function r(o){return e.post(t.baseUrl+"store/submitStoreFollow",o)}function a(o){return e.post(t.baseUrl+"store/deleteStoreFollow",o)}this.submitFollow=r,this.deleteFollow=a,this.getFollow=o}e.module("app.store").service("userFollowService",["$http","baseUrlService",t])}(window.angular),function(e){"use strict";function t(e,t){function o(o){return e.get(t.baseUrl+"upvote/upvoted",{params:o})}function r(o){return e.post(t.baseUrl+"upvote/upvotes/storeUpvote",o)}function a(o){return e.delete(t.baseUrl+"upvote/upvotes/"+o)}this.submitUpvote=r,this.deleteUpvote=a,this.getUpvote=o}e.module("app.store").service("userUpvoteService",["$http","baseUrlService",t])}(window.angular),function(e){"use strict";function t(e,t){function o(o){return e.get(t.baseUrl+"visit/visited",{params:o})}function r(o){return e.post(t.baseUrl+"visit/visits/store",o)}function a(o){return e.delete(t.baseUrl+"visit/visits/",{params:o})}this.submitVisit=r,this.deleteVisit=a,this.getVisit=o}e.module("app.store").service("userVisitService",["$http","baseUrlService",t])}(window.angular),function(e){"use strict";function t(e,t,o,r,a){function n(e){a.changeBrowserURLMethod("/admin/adminStorePage/"+e)}function i(){r.getUserPage(r.getUser()._id)}function s(){t.logout(),r.removeUser(),o.location.reload()}function l(){a.changeBrowserURLMethod("/admin/createStore/")}function c(){u.user=r.getUser(),u.userProfilePic=r.getUser().picture,u.userStoresList=r.getUser().storeId}var u=this;u.getUserPage=i,u.getAdminStore=n,u.createNewStore=l,u.authLogout=s,u.authCheck=t.isAuthenticated()&&!r.getUser().facebook,c()}e.module("app.user").controller("UserAccountSettingsController",["$scope","$auth","$window","userData","changeBrowserURL",t])}(window.angular),function(e){"use strict";function t(e,t,o){function r(){a.loading=!0,o.getSingleUserActivity(t.userId).then(function(e){a.activityData+=e.data,a.loading=!1})}var a=this;a.loading=!0,a.activityData=" ",r()}e.module("app.user").controller("UserActivityListController",["$scope","$stateParams","activityService",t])}(window.angular),function(e){"use strict";function t(e,t,o){function r(){l.params.page+=1,l.getActivity(l.params)}function a(e){l.loading=!0,o.getUserFollowingActivity(t.getPayload().sub,e).then(function(e){l.activityData.push(e.data),console.log("from the activity"),console.log(e),l.loading=!1})}function n(e){l.loading=!0,o.getAllActivity(e).then(function(e){console.log("from the activity"),console.log(e),l.activityData.push(e.data),l.loading=!1})}function i(e){
l.authCheck?l.getUserFollowingActivity(e):l.getAllActivity(e)}function s(){l.getActivity(l.params)}var l=this;l.loading=!0,l.authCheck=t.isAuthenticated(),l.activityData=[],l.params={page:1,limit:25},l.loadMoreFeed=r,l.getUserFollowingActivity=a,l.getAllActivity=n,l.getActivity=i,s()}e.module("app.user").controller("UserCustomFeedController",["$scope","$auth","activityService",t])}(window.angular),function(e){"use strict";function t(e,t,o){function r(){l.params.page+=1,l.getActivity(l.params)}function a(e){l.loading=!0,o.getUserFollowingActivity(t.getPayload().sub,e).then(function(e){l.activityData.push(e.data),l.loading=!1})}function n(e){e.sort="time",l.loading=!0,o.getAllActivity(e).then(function(e){console.log("from the activity"),console.log(e),l.activityData.push(e.data),l.loading=!1})}function i(e){l.authCheck?l.getUserFollowingActivity(e):l.getAllActivity(e)}function s(){l.getActivity(l.params)}var l=this;l.loading=!0,l.authCheck=t.isAuthenticated(),l.activityData=[],l.params={page:1,limit:50,sort:"-time"},l.loadMoreFeed=r,l.getUserFollowingActivity=a,l.getAllActivity=n,l.getActivity=i,s()}e.module("app.user").controller("UserFeedController",["$scope","$auth","activityService","NgMap",t])}(window.angular),function(e){"use strict";function t(e,t,o,r,a,n){function i(){u.loading=!0,n.getUserFollowers(r.userId).then(function(e){u.followersList=e.data,u.loading=!1})}function s(e){n.submitUserFollow(a.getUser()._id,e).then(function(e){a.setUser()})}function l(e){n.deleteUserFollow(a.getUser()._id,e).then(function(e){a.setUser()})}function c(e){if(u.authCheck)return a.getUser().following.indexOf(e)!=-1}var u=this;i(),u.loading=!0,u.authCheck=t.isAuthenticated(),u.followersList=[],u.currentUserFollowed=c,u.submitUserFollow=s,u.deleteUserFollow=l,u.getUserPage=a.getUserPage}e.module("app.user").controller("UserFollowersController",["$scope","$auth","$location","$stateParams","userData","userService",t])}(window.angular),function(e){"use strict";function t(e,t,o,r,a,n){function i(){u.loading=!0,n.getUserFollowing(r.userId).then(function(e){u.followersList=e.data,u.loading=!1})}function s(e){n.submitUserFollow(a.getUser()._id,e).then(function(e){a.setUser()})}function l(e){n.deleteUserFollow(a.getUser()._id,e).then(function(e){a.setUser()})}function c(e){if(u.authCheck)return a.getUser().following.indexOf(e)!=-1}var u=this;i(),u.loading=!0,u.authCheck=t.isAuthenticated(),u.followersList=[],u.currentUserFollowed=c,u.submitUserFollow=s,u.deleteUserFollow=l,u.getUserPage=a.getUserPage}e.module("app.user").controller("UserFollowingController",["$scope","$auth","$location","$stateParams","userData","userService",t])}(window.angular),function(e){"use strict";function t(e,t,o){function r(){s.params.page+=1,s.getActivity(s.params)}function a(e){s.loading=!0,o.getAllActivity(e).then(function(e){console.log("from the activity"),console.log(e),s.activityData.push(e.data),s.loading=!1})}function n(e){s.getAllActivity(e)}function i(){s.getActivity(s.params)}var s=this;s.loading=!0,s.activityData=[],s.params={page:1,limit:25},s.loadMoreFeed=r,s.getAllActivity=a,s.getActivity=n,i()}e.module("app.user").controller("UserLocalFeedController",["$scope","$auth","activityService",t])}(window.angular),function(e){"use strict";function t(e,t,o){function r(){}var a=this;a.loading=!0,a.authCheck=t.isAuthenticated(),r(),a.tab=1,a.setTab=function(e){a.tab=e,console.log("the tab"),console.log(a.tab)},a.isSet=function(e){return a.tab===e}}e.module("app.user").controller("UserMePageController",["$scope","$auth","userData",t])}(window.angular),function(e){"use strict";function t(e,t){function o(){}var r=this;r.loading=!0,r.authCheck=t.isAuthenticated(),o(),r.tab=1,r.setTab=function(e){r.tab=e,console.log("the tab"),console.log(r.tab)},r.isSet=function(e){return r.tab===e}}e.module("app.user").controller("UserMobileFeedController",["$scope","$auth",t])}(window.angular),function(e){"use strict";function t(e,t,o,r,a){function n(){if(u.authCheck)return o.userId==r.getUser()._id}function i(e){a.submitUserFollow(r.getUser()._id,e).then(function(e){r.setUser(),console.log(e)},function(e){console.log(e)})}function s(e){a.deleteUserFollow(r.getUser()._id,e).then(function(t){r.getUser().following.indexOf(e);r.setUser()},function(e){console.log(e)})}function l(e){if(u.authCheck)return r.getUser().following.indexOf(e)!=-1}function c(){u.loading=!0,a.getSingleUser(o.userId).then(function(e){u.currentUserData=e.data,u.loading=!1})}var u=this;c(),u.currentUserData={},u.loading=!0,u.authCheck=t.isAuthenticated(),u.submitUserFollow=i,u.deleteUserFollow=s,u.userFollowed=l,u.currentProfileUser=o.userId,u.authCheck&&(u.loggedUser=r.getUser()._id),u.currentUser=n}e.module("app.user").controller("UserPageController",["$scope","$auth","$stateParams","userData","userService",t])}(window.angular),function(e){"use strict";function t(e,t){function o(){}function r(e){t.getUsers(e).then(function(e){a.usersList=e.data.docs,console.log("the users list"),console.log(a.usersList),a.loading=!1})}var a=this;o(),a.loading=!0,e.$watch(function(){return a.userSuggestionsModel},function(e){r(e&&e.length>=2?{userSearch:e,limit:20,page:1}:{limit:20,page:1})})}e.module("app.user").controller("UserPageSuggestionController",["$scope","userService",t])}(window.angular),function(e){"use strict";function t(e,t,o,r){var a=this;a.spinnerLoading=!1,a.uploadFiles=function(e,n){console.log("Enterd file uploading"),a.f=e,a.errFile=n&&n[0],e&&(e.upload=t.upload({url:r.baseUrl+"user/upload/profileImage/"+o.getUser()._id,data:{file:e}}),a.spinnerLoading=!0,e.upload.then(function(t){e.result=t.data,o.setUser(),o.getUser().picture=t.data,console.log("the image received"),console.log(t.data),$(".userProfileImage").find("img").attr("src",t.data),a.spinnerLoading=!1}))}}e.module("app.user").controller("UserProfileImageController",["$scope","Upload","userData","baseUrlService",t])}(window.angular),function(e){"use strict";function t(e,t,o,r){function a(){i.userForm=o.getUser(),console.log("user data"),console.log(i.userForm)}function n(){console.log("updated form"),console.log(i.userForm),r.updateUser(i.userForm).then(function(e){console.log(e),o.setUser()},function(e){console.log(e)})}var i=this;i.authCheck=t.isAuthenticated(),i.updateUserProfile=n,a()}e.module("app.user").controller("UserProfileSettingsController",["$scope","$auth","userData","userService",t])}(window.angular),function(e){"use strict";function t(e,t,o,r,a,n){function i(){}i()}e.module("app.user").controller("UserStatisticsController",["$scope","$auth","$location","$stateParams","userData","userService",t])}(window.angular),function(e){"use strict";function t(){return{restrict:"E",replace:!0,templateUrl:"app/user/views/userChangePasswordTemplate.html",scope:{},link:function(e,t,o){},controllerAs:"vm",controller:["$scope","userService",function(e,t){function o(){a.passwordChangedValue=!1,a.showIncorrectPassword=!1,t.checkUserPassword({password:a.user.oldPassword}).then(function(e){return a.passwordCheckValue=e.data,a.passwordCheckValue?void t.changeUserPassword({password:a.user.password}).then(function(e){console.log("the status"),console.log(e.data),a.passwordChangedValue=!0}):void(a.showIncorrectPassword=!0)}),a.showIncorrectPassword=!1}function r(){}var a=this;a.user={},a.checkCurrentPassword=r,a.changePassword=o}]}}e.module("app.user").directive("changePassword",[t])}(window.angular),function(e){"use strict";function t(){return{restrict:"E",replace:!0,templateUrl:"app/user/views/userSuggestionList.html",scope:{usersList:"="},link:function(e,t,o){console.log("link"),console.log(e)},controllerAs:"vm",controller:["$scope","$auth","userService","userData",function(e,t,o,r){function a(e){o.submitUserFollow(r.getUser()._id,e).then(function(e){r.setUser()})}function n(e){s.authCheck&&o.deleteUserFollow(r.getUser()._id,e).then(function(e){r.setUser()})}function i(e){if(s.authCheck)return r.getUser().following.indexOf(e)!=-1}var s=this;s.user={},s.loading=!0,s.authCheck=t.isAuthenticated(),s.currentUserFollowed=i,s.submitUserFollow=a,s.deleteUserFollow=n,s.getUserPage=r.getUserPage}]}}e.module("app.user").directive("userSuggestionList",[t])}(window.angular),function(e){"use strict";function t(e,t){function o(o){return e.get(t.baseUrl+"activity/singleUserActivity/"+o)}function r(o){return e.get(t.baseUrl+"activity/allActivity/",{params:o})}function a(o,r){return e.get(t.baseUrl+"activity/userFollowingActivity/"+o,{params:r})}this.getSingleUserActivity=o,this.getAllActivity=r,this.getUserFollowingActivity=a}e.module("app.user").service("activityService",["$http","baseUrlService",t])}(window.angular),function(e){"use strict";function t(e,t){function o(){var o={timeout:1e4,enableHighAccuracy:!1};return e.getCurrentPosition(o).then(function(e){var o={latitude:e.coords.latitude,longitude:e.coords.longitude};return t.updateUser(o),o})}this.getUserLocation=o}e.module("app.user").service("userLocationService",["$cordovaGeolocation","userService",t])}(window.angular),function(e){"use strict";function t(e,t,o){function r(o){return e.get(t.baseUrl+"user/collection",{params:o})}function a(o,r){return e.get(t.baseUrl+"user/user/"+o,{params:r})}function n(o){return e.get(t.baseUrl+"user/singleUser/"+o)}function i(o){return e.get(t.baseUrl+"review/ratings/store/"+o)}function s(o){return e.post(t.baseUrl+"user/submitStoreReport/",o)}function l(o,r){return e.post(t.baseUrl+"user/submitFollow/"+o+"/"+r)}function c(o,r){return e.post(t.baseUrl+"user/deleteFollow/"+o+"/"+r)}function u(o,r){return e.get(t.baseUrl+"user/checkFollow/"+o+"/"+r)}function d(o){return e.get(t.baseUrl+"user/userFollowers/"+o)}function g(o){return e.get(t.baseUrl+"user/userFollowing/"+o)}function f(o){return e.get(t.baseUrl+"user/singleUser/"+o,{params:{select:"name address.area address.locality"}})}function p(r){if(o.getUser())return e.post(t.baseUrl+"user/updateUser/"+o.getUser()._id,r)}function m(r){return e.post(t.baseUrl+"user/checkPassword/"+o.getUser()._id,r)}function h(r){return e.post(t.baseUrl+"user/changePassword/"+o.getUser()._id,r)}this.getSingleUser=n,this.getUserDetails=a,this.getStoreRating=i,this.submitUserFollow=l,this.submitStoreReport=s,this.deleteUserFollow=c,this.checkUserFollow=u,this.getUserFollowers=d,this.getUserFollowing=g,this.getUserStores=f,this.updateUser=p,this.checkUserPassword=m,this.changeUserPassword=h,this.getUsers=r}e.module("app.user").service("userService",["$http","baseUrlService","userData",t])}(window.angular);